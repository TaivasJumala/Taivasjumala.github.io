<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#6667AB" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.121.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon.png><meta itemprop=name content="WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境"><meta itemprop=description content="Next is now."><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://blog.taivasjumala.yafoss.org/imgs/Avatar.png"><meta itemprop=keywords content=","><meta property="og:type" content="article"><meta property="og:title" content="WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境"><meta property="og:description" content="Next is now."><meta property="og:image" content="/imgs/Avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blog.taivasjumala.yafoss.org/document/practice_wsl2_with_ubuntu_220.4_and_kde/"><meta property="og:site_name" content="Taivas Jumala"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Taiavs Jumala"><meta property="article:published_time" content="2023-12-08 20:46:10 +0800 +0800"><meta property="article:modified_time" content="2023-12-08 20:46:10 +0800 +0800"><meta name=twitter:card content="summary_large_image"><meta name=twitter:creator content="<twitter:creator>"><meta name=twitter:description content><meta name=twitter:image content="https://blog.taivasjumala.yafoss.org/imgs/Avatar.png"><meta name=twitter:title content="WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境"><meta name=twitter:site content="@<twitter:site>"><link rel=publisher href=#ZgotmplZ><meta property="fb:admins" content="<fb:admin_id>"><meta property="fb:app_id" content="<fb:app_id>"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.397e15069a1f9afc0d6d2a3f0f07555d305779df3cef9870ed6adef7eb2c5743.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"--本文结束--"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"practice_wsl2_with_ubuntu_220.4_and_kde","permalink":"https://blog.taivasjumala.yafoss.org/document/practice_wsl2_with_ubuntu_220.4_and_kde/","title":"WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境 - Taivas Jumala</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Taivas Jumala</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>知识是创造的艺术</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>0</span></a></li><li class="menu-item menu-item-document"><a href=/categories/%E6%96%87%E6%A1%A3/ class=hvr-icon-pulse rel=section><i class="fa fa-book hvr-icon"></i>文档</a></li><li class="menu-item menu-item-translations"><a href=/categories/%E8%AF%91%E6%96%87/ class=hvr-icon-pulse rel=section><i class="fa fa-pen hvr-icon"></i>译文</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链列表</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#什么是-wsl为什么使用-wsl2>什么是 WSL？为什么使用 WSL2？</a><ul><li><a href=#传统虚拟机-vs-wsl2-2>传统虚拟机 vs WSL2</a><ul><li><a href=#使用虚拟机运行-linux-的缺点>使用虚拟机运行 Linux 的缺点</a></li><li><a href=#wsl2-的一些问题>WSL2 的一些问题</a></li></ul></li></ul></li><li><a href=#为什么选择-ubuntu>为什么选择 Ubuntu</a><ul><li><a href=#针对数据驱动的解决方案进行了优化>针对数据驱动的解决方案进行了优化</a></li><li><a href=#实时内核支持>实时内核支持</a></li><li><a href=#最新的应用程序软件包和驱动程序>最新的应用程序、软件包和驱动程序</a></li></ul></li><li><a href=#为什么选择-kde-而不是-gnome>为什么选择 KDE 而不是 GNOME</a></li><li><a href=#安装-wsl24>安装 WSL2</a><ul><li><a href=#选项一windows-subsystem-for-linux-preview>选项一：Windows Subsystem for Linux Preview</a></li><li><a href=#选项二从命令行安装>选项二：从命令行安装</a></li><li><a href=#选项三旧版本的手动安装步骤>选项三：旧版本的手动安装步骤</a></li></ul></li><li><a href=#安装-ubuntu-2204>安装 Ubuntu-22.04</a><ul><li><a href=#设置-linux-用户名和密码6>设置 Linux 用户名和密码</a></li><li><a href=#设置中文>设置中文</a></li><li><a href=#更换软件源>更换软件源</a></li><li><a href=#安装-kubuntu-桌面组件>安装 Kubuntu 桌面组件</a></li></ul></li><li><a href=#关于-systemd-和-wsl>关于 Systemd 和 wsl</a><ul><li><ul><li><a href=#genie>genie</a></li><li><a href=#subsystemctl>subsystemctl</a></li><li><a href=#wsl-distrod>wsl-distrod</a></li></ul></li></ul></li><li><a href=#安装配置-systemd-genie89>安装配置 SystemD-Genie</a><ul><li><a href=#安装-net-运行时>安装 .NET 运行时</a></li><li><a href=#添加-wsl-transdebian-仓库>添加 wsl-transdebian 仓库</a></li><li><a href=#安装>安装</a></li><li><a href=#解决一些问题>解决一些问题</a></li></ul></li><li><a href=#使用-x410-结合-wsl2-运行-kde-桌面环境>使用 x410 结合 WSL2 运行 KDE 桌面环境</a><ul><li><a href=#配置-display-环境变量1011>配置 DISPLAY 环境变量[^10]</a></li><li><a href=#为你的-kubuntu-设置快捷方式12>为你的 Kubuntu 设置快捷方式</a></li><li><a href=#安装-firefox>安装 Firefox</a></li><li><a href=#开启声音14>开启声音</a></li></ul></li><li><a href=#visual-studio-code>Visual Studio Code</a><ul><li><a href=#c-gccclangdcmakeninja>C++: GCC+Clangd+CMake+Ninja</a><ul><li><a href=#测试>测试</a></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt="Taivas Jumala" src=/imgs/img-lazy-loading.gif data-src=/imgs/Avatar.png><p class=site-author-name itemprop=name>Taivas Jumala</p><div class=site-description itemprop=description>Next is now.</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>0</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>3</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>6</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://instagram.com/taivas_jumala title="Instagram → https://instagram.com/taivas_jumala" rel=noopener target=_blank><i class="fab fa-instagram fa-fw"></i>
</a></span><span class=links-of-social-item><a href=https://blog.taivasjumala.yafoss.org/rss.xml title="RSS → https://blog.taivasjumala.yafoss.org/rss.xml" rel=noopener target=_blank><i class="fa-solid fa-rss fa-fw"></i>
</a></span><span class=links-of-social-item><a href=https://github.com/Taivasjumala title="Github → https://github.com/Taivasjumala" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/taivasjumalai title="知 乎 → https://www.zhihu.com/people/taivasjumalai" rel=noopener target=_blank><i class="fa-brands fa-zhihu fa-fw"></i>
</a></span><span class=links-of-social-item><a href=https://stackoverflow.com/users/15668592/taivasjumala title="StackOverflow → https://stackoverflow.com/users/15668592/taivasjumala" rel=noopener target=_blank><i class="fab fa-stack-overflow fa-fw"></i>
</a></span><span class=links-of-social-item><a href=https://twitter.com/TaivasJumala title="Twitter → https://twitter.com/TaivasJumala" rel=noopener target=_blank><i class="fab fa-twitter fa-fw"></i></a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/Taivasjumala rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blog.taivasjumala.yafoss.org/document/practice_wsl2_with_ubuntu_220.4_and_kde/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/Avatar.png"><meta itemprop=name content="Taiavs Jumala"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Taivas Jumala"><meta itemprop=description content="Next is now."></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境"><meta itemprop=description content="
本文写于 2022 年 8 月 27 日，文章内容有效性可能随时间发生变化。
本人是 Linux 新手，文章可能有不成熟之处。
作者：Taivas Jumala

update on 2022-12-20, 22:13:48 (UTC +08:00)
WSL 的 systemd 得到了 Microsoft 官方的支持，本文一大部分仅剩参考意义。
有鉴于此，我以后应该写一些不那么有时效性的，更有含金量一点的东西。
而且，我在&#34;Pro WSL&#34;这本书里发现了很多差不多的内容，属于是重复造轮子了。
"></span><header class=post-header><h1 class=post-title itemprop="name headline">WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2023-12-08 20:46:10 +0800 +0800" itemprop="dateCreated datePublished" datetime="2023-12-08 20:46:10 +0800 +0800">2023-12-08
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E6%96%87%E6%A1%A3 itemprop=url rel=index><span itemprop=name>文档</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>16758</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>34分钟</span></span></div></div></header><div class=post-body itemprop=articleBody><blockquote><p>本文写于 2022 年 8 月 27 日，文章内容有效性可能随时间发生变化。</p><p>本人是 Linux 新手，文章可能有不成熟之处。</p><p>作者：Taivas Jumala</p><hr><p>update on 2022-12-20, 22:13:48 (UTC +08:00)</p><p>WSL 的 systemd 得到了 Microsoft 官方的支持，本文一大部分仅剩参考意义。</p><p>有鉴于此，我以后应该写一些不那么有时效性的，更有含金量一点的东西。</p><p>而且，我在"Pro WSL"这本书里发现了很多差不多的内容，属于是重复造轮子了。</p></blockquote><h2 id=什么是-wsl为什么使用-wsl2>什么是 WSL？为什么使用 WSL2？
<a class=header-anchor href=#%e4%bb%80%e4%b9%88%e6%98%af-wsl%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8-wsl2></a></h2><p>WSL 全称 Windows Subsystem for Linux (适用于 Linux 的 Windows 子系统), 它可让开发人员按原样运行 GNU/Linux 环境 - 包括大多数命令行工具、实用工具和应用程序 - 且不会产生传统虚拟机或双启动设置开销。它的主要目标是<strong>提高文件系统性能</strong>，以及添加<strong>完全的系统调用兼容性</strong>。这一新的体系结构改变了这些 Linux 二进制文件与Windows 和计算机硬件进行交互的方式，但仍然提供与 WSL 1（当前广泛可用的版本）中相同的用户体验。</p><p>单个 Linux 分发版可以在 WSL 1 或 WSL 2 体系结构中运行。 每个分发版可随时升级或降级，并且你可以并行运行 WSL 1 和 WSL 2 分发版。 WSL 2 使用全新的体系结构，该体系结构受益于运行真正的 Linux 内核。<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><p>​ 使用WSL2您可以：</p><ul><li><a href=https://aka.ms/wslstore title="在 Microsoft Store" rel="noopener external nofollow noreferrer" target=_blank class=exturl>在 Microsoft Store
<i class="fa fa-external-link-alt"></i>
</a>中选择你偏好的 GNU/Linux 分发版。</li><li>运行常用的命令行软件工具（例如 <code>grep</code>、<code>sed</code>、<code>awk</code>）或其他 ELF-64 二进制文件。</li><li>运行 Bash shell 脚本和 GNU/Linux 命令行应用程序，包括：<ul><li>工具：vim、emacs、tmux</li><li>语言：
<a href=https://docs.microsoft.com/zh-cn/windows/nodejs/setup-on-wsl2 title=NodeJS rel="noopener external nofollow noreferrer" target=_blank class=exturl>NodeJS
<i class="fa fa-external-link-alt"></i>
</a>、JavaScript、
<a href=https://docs.microsoft.com/zh-cn/windows/python/web-frameworks title=Python rel="noopener external nofollow noreferrer" target=_blank class=exturl>Python
<i class="fa fa-external-link-alt"></i>
</a>、Ruby、C/C++、C# 与 F#、Rust、Go 等</li><li>服务：SSHD、
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-database title=MySQL rel="noopener external nofollow noreferrer" target=_blank class=exturl>MySQL
<i class="fa fa-external-link-alt"></i>
</a>、Apache、lighttpd、
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-database title=MongoDB rel="noopener external nofollow noreferrer" target=_blank class=exturl>MongoDB
<i class="fa fa-external-link-alt"></i>
</a>、
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/wsl-database title=PostgreSQL rel="noopener external nofollow noreferrer" target=_blank class=exturl>PostgreSQL
<i class="fa fa-external-link-alt"></i>
</a>。</li></ul></li><li>使用自己的 GNU/Linux 分发包管理器安装其他软件。</li><li>使用类似于 Unix 的命令行 shell 调用 Windows 应用程序。</li><li>在 Windows 上调用 GNU/Linux 应用程序。</li><li>运行直接集成到 Windows 桌面的
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/gui-apps title="GNU/Linux 图形应用程序" rel="noopener external nofollow noreferrer" target=_blank class=exturl>GNU/Linux 图形应用程序
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://docs.microsoft.com/zh-cn/windows/wsl/tutorials/gpu-compute title="将 GPU 加速" rel="noopener external nofollow noreferrer" target=_blank class=exturl>将 GPU 加速
<i class="fa fa-external-link-alt"></i>
</a>用于机器学习、数据科学场景等</li></ul><p>​ 在享受 Linux 带来的开发便捷的同时，您同时可以享受到 Windows 上的办公软件、通讯工具，同时进行游戏娱乐。</p><h3 id=传统虚拟机-vs-wsl2-2>传统虚拟机 vs WSL2 <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>
<a class=header-anchor href=#%e4%bc%a0%e7%bb%9f%e8%99%9a%e6%8b%9f%e6%9c%ba-vs-wsl2-2></a></h3><p>当然，在 Windows 上使用 VirtualBox 或是 VMWare 等安装 Linux 虚拟机是可行的。即使对于 WSL2(本质为 Hyper-V 虚拟机)，它们相较于裸机运行 Linux 都是有所妥协的。</p><h4 id=使用虚拟机运行-linux-的缺点>使用虚拟机运行 Linux 的缺点
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8%e8%99%9a%e6%8b%9f%e6%9c%ba%e8%bf%90%e8%a1%8c-linux-%e7%9a%84%e7%bc%ba%e7%82%b9></a></h4><ul><li><p><strong>安装</strong>安装 Linux 并不适合胆小的人，而且需要相当长的时间。但 WSL2 能让你运行最新的 Linux 发行版，理想情况下只需几下鼠标点击。</p></li><li><p><strong>启动时间</strong> 现如今 Linux 能相当快地启动，但是仍然需要十数秒(或因计算机性能而有所区别)。启动虚拟机再启动 Linux 则要花更长时间。WSL2 则只需几秒钟，可以随着 Windows 一起启动。（实际上，启用 WSL2 后，Windows 本身也运行在 Hyper-V 上，并因此有些许性能损失。）</p></li><li><p><strong>内存分配</strong>传统虚拟机会要求你在配置虚拟机时指明要分配的内存大小。假设你为你的虚拟机分配了 2GB 的内存，这 2GB 将不再能被你的 Windows 主机使用。而 WSL2 根据需要由 WSL 系统分配、释放内存。早期的 WSL2 并不是很积极的让分配的内存释放，最近的版本有了很大的改善。同时，你可以指定能被分配的最大内存。</p></li><li><p><strong>和 Windows 几乎没有任何集成交互</strong>基本上你只能通过 Samba 来让 Windows 和 Linux 虚拟机来分享文件。如果你知道如何配置这当然是可行的。而 WSL2 为你做好了一切，而且易于使用，您可以用 Windows 的文件资源管理器访问 Linux 文件，同时也可以从 WSL2 的 Linux 发行版中挂载的文件系统访问 Windows 文件，虽然 I/O 效率不是很高。</p><p>Microsoft Visual Studio Code 允许你在 Linux 开发 (例如 NGINX web 服务器或是 Docker 容器) 但使用 Windows 端的 GUI 来获得近似 Linux 原生的开发体验。</p><p>使用 X Windows 配置，你可以让 Linux GUI 应用显示在你的 Windows 任务栏中，来获得更好的体验。</p></li></ul><h4 id=wsl2-的一些问题>WSL2 的一些问题
<a class=header-anchor href=#wsl2-%e7%9a%84%e4%b8%80%e4%ba%9b%e9%97%ae%e9%a2%98></a></h4><p>根据
<a href=https://www.zhihu.com/question/350529856/answer/1085818033 title="内置WSL 2的Windows 10可以完全取代桌面版Linux吗？ - 于国瑞的回答 - 知乎" rel="noopener external nofollow noreferrer" target=_blank class=exturl>内置WSL 2的Windows 10可以完全取代桌面版Linux吗？ - 于国瑞的回答 - 知乎
<i class="fa fa-external-link-alt"></i></a></p><ul><li>缺少 IPV6 的完全支持</li><li>WSL 内部不能访问 Windows 的 localhost(然而从 Windows 可以访问 Linux 中的 localhost)</li><li>缺少 Systemd (这也是文章之后将着重解决的问题)</li></ul><h2 id=为什么选择-ubuntu>为什么选择 Ubuntu
<a class=header-anchor href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9-ubuntu></a></h2><p>作为可见的最受欢迎的 Linux 发行版(现在也许是 Arch Linux 了)，Ubuntu 教程丰富，相对没有复杂的配置，易于新人上手。我个人也建议您之后去尝试 Fedora、Debian、Open SUSE等(大蜥蜴！我好喜欢你啊🥵！)。当然也可以尝试一下 Arch Linux。即使使用其他发行版，我本文对您也许也会有所帮助。</p><p>Ubuntu 22.04 LTS 最新代号为 Jammy Jellyfish，带来了几个新功能：<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p><h3 id=针对数据驱动的解决方案进行了优化>针对数据驱动的解决方案进行了优化
<a class=header-anchor href=#%e9%92%88%e5%af%b9%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8%e7%9a%84%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88%e8%bf%9b%e8%a1%8c%e4%ba%86%e4%bc%98%e5%8c%96></a></h3><p>数据分析和处理是当今每个业务的核心。要做到这一点，您需要强大的计算能力。Ubuntu 22.04 LTS 带来了开箱即用的NVIDIA 虚拟 GPU (vGPU)驱动程序支持。这意味着您可以利用 NVIDIA 虚拟 GPU 软件，使您能够在从物理 GPU 服务器共享的虚拟机中使用 GPU 计算能力。</p><h3 id=实时内核支持>实时内核支持
<a class=header-anchor href=#%e5%ae%9e%e6%97%b6%e5%86%85%e6%a0%b8%e6%94%af%e6%8c%81></a></h3><p>此外，Canonical 在 Ubuntu 22.04 LTS 版本中发布的一个有趣的公告是提供“real-time”内核选项，该选项现在是beta 测试版。对于电信和其他行业，对时间敏感的工作需要低延迟的操作系统。因此，考虑到这一点以及渗透这些领域的愿景，Ubuntu 22.04 LTS 带来了一个应用了 PREEMPT_RT 补丁的实时内核构建。它适用于 x86_64 和 AArch64 架构。</p><h3 id=最新的应用程序软件包和驱动程序>最新的应用程序、软件包和驱动程序
<a class=header-anchor href=#%e6%9c%80%e6%96%b0%e7%9a%84%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e8%bd%af%e4%bb%b6%e5%8c%85%e5%92%8c%e9%a9%b1%e5%8a%a8%e7%a8%8b%e5%ba%8f></a></h3><p>除了上述更改之外，此版本还带来了大量的软件包和工具链升级列表。例如，此版本根据使用情况带来了多种 Linux Kernel 类型，例如 Ubuntu 桌面可以选择加入Kernel 5.17，而硬件支持 Kernel 仍然是 5.15。</p><p>不仅如此，Ubuntu Server 还具有长期支持的 Kernel 5.15，而 Ubuntu Cloud 映像可以选择与云提供商合作使用更优化的 Kernel。</p><p>此外，如果您是 NVIDIA 用户，值得了解的是 ARM64 上的 NVIDIA 驱动程序的 Linux 限制模块现在可用（在 x86_64中已经可用）。您可以使用 ubuntu-drivers程序来安装和配置 NVIDIA 驱动程序。</p><p>由于核心模块和子系统的存在，一个完整的操作系统可以完美运行。因此，考虑到这一点，Ubuntu 22.04 LTS 升级了所有这些以迎合这个伟大的版本。下面是一个简短的介绍。</p><p><strong>GNU/Linux 核心</strong></p><ul><li>GCC 11.2.0</li><li>binutils 2.38</li><li>glibc 2.35</li></ul><p><strong>编程工具链</strong></p><ul><li>Python 3.10.4</li><li>Perl 5.34.0</li><li>LLVM 14</li><li>golang 1.18</li><li>rustc 1.58</li><li>OpenJDK 11 (option to use OpenJDK 18)</li><li>Ruby 3.0PHP 8.1.2</li><li>Apache 2.4.52</li><li>PostgreSQL 14.2</li><li>Django 3.2.12</li><li>MySQL 8.0</li><li>Updated NFS and Samba Server</li><li>Systemd 249.11</li><li>OpenSSL 3.0</li></ul><p><strong>虚拟化</strong></p><ul><li><p>qemu 6.2.0</p></li><li><p>libvirt 8.0.0</p></li><li><p>virt-manager 4.0.0</p></li></ul><h2 id=为什么选择-kde-而不是-gnome>为什么选择 KDE 而不是 GNOME
<a class=header-anchor href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9-kde-%e8%80%8c%e4%b8%8d%e6%98%af-gnome></a></h2><p>诚然，GNOME 是 Ubuntu 的默认桌面环境，但是由于各种原因我仍然选择了 KDE 作为我们的桌面环境。</p><p>首先，由于 WSL2 缺少 Systemd，安装 GNOME 的过程中其会尝试配置大量相关服务，实际上这个过程会让你相当折磨，如果您仍然想要尝试，
<a href=https://x410.dev/cookbook/wsl/running-ubuntu-desktop-in-wsl2/ title="Running Ubuntu Desktop in WSL2" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Running Ubuntu Desktop in WSL2
<i class="fa fa-external-link-alt"></i>
</a>这篇文章可能对您有所帮助。</p><p>其次，KDE 有着华丽的桌面效果和高可定制性，同时 Reddit 用户
<a href=https://www.reddit.com/user/FriendlyJewThrowaway/ title=u/FriendlyJewThrowaway rel="noopener external nofollow noreferrer" target=_blank class=exturl>u/FriendlyJewThrowaway
<i class="fa fa-external-link-alt"></i>
</a>发布了使用 VcXsrv 作为 X-Server 运行 KDE 非常流畅的说明，在实践中，其确实工作良好，只有在网页浏览器中滚动页面时才会遇到可见的延迟，而 Dolphin 等工作正常并且 Nextcloud 客户端工作良好甚至并且不像 GNOME, 其非常好地集成进了任务栏。</p><p>最后……</p><blockquote><p>作者：霜空
链接：https://www.zhihu.com/question/20238837/answer/2645973880
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><p>KDE因为qt的协议问题没有被大资本选中，因此成不了开源良心，后来因为财政问题测试不到位，结果在一段时间内坏了相当的口碑，好在面向用户的方向没错，之后就一路向好了。</p><p>在最近几年，其实Gnome3要不是资本在后面强推，几乎被所有主流发行版作为默认的话，早被KDE碾成渣了。</p><p>以前我只是觉得Gnome3设计脑残，比如说全屏菜单，比如说快速启动栏的功能重叠，比如说上面任务栏占了宽屏宝贵的横向空间却又把所有程序缩成一点……</p><p>后来遇到高人交流才知道还是自己拿衣服了。Gnome3的设计初衷就和KDE或者传统Windows桌面不同，不是以提高桌面工作效率而定的；就像是现在的网站不像是10年前那样，不是为了最大限度的提高用户信息获取效率而设计，虽然有了多媒体加持仿佛变得多姿多彩了，实质使用起来却极其原始落后，大多采用了非常落后、信息含量极低的图片（图标）和点击为主的方式，连像十年那般根据时间和类别之类的硬指标排序都不行，操作效率极差，信息获取效率也极差。</p><p>原因就在于09年以后深度学习的成熟，在之后几乎所有新设计出的交互界面都有且只有一个目的，那就是为了清晰和明确指向的单一信息释放与采集。说白了就是采集用户的数据来训练机器，同时又反过来利用训练好的模型来规范用户。如果不信的话，比如说可以做一个小实验，去下载主流的linux发行版的live镜像，gnome3和kde的，用虚拟机打开联网，然后打开系统监视器，接着什么都不做。然后就可以看到几乎所有的gnome3发行版都在偷偷摸摸的不断发数据包收数据包，而kde的大多数不会有网络活动。</p><p>手机和平板的界面不说了，整个软硬件体系都是为之设计的，早没救了；只说计算机桌面，现在不管是Gnome3，还是windows10、11，甚至mac的新界面，都在朝着这个方向飞速发展，至于KDE只能说且用且珍惜吧，一旦用户量到达一定级别，背后的基金会被收购控制是注定的事情。</p></blockquote><p>同时，如果你选择 Arch Linux 进行本文的实践，几乎无可避免的会选择 KDE。折腾小子当然只会一直折腾下去啦（不是主要原因）！</p><p>此外，如果选择 XFCE 作为您的桌面环境，对于 WSL 来说许多人认为它是一个不错的选择。</p><h2 id=安装-wsl24>安装 WSL2<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-wsl24></a></h2><blockquote><p>本人目前使用 Windows 11 22H2 (OS 内部版本22622.586)，处于 Windows Insider Preview（Windows 预览体验计划） Beta 渠道。</p><p>相关内容除 Microsoft 官方文档外互联网上也有很多相关内容，读者也可以自行尝试。</p></blockquote><p>开始前，最好在&rsquo;启用或关闭 Windows 功能&rsquo;（win+s 搜索或在控制面板中查找）中 开启「 Hyper-V」 和「适用于 Linux 的 Windows 子系统」功能。</p><p>安装 WSL 的方式方法根据您的 Windows 版本而有所不同。这部分内容部分参考微软的官方文档：
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/install title="使用 WSL 在 Windows 上安装 Linux" rel="noopener external nofollow noreferrer" target=_blank class=exturl>使用 WSL 在 Windows 上安装 Linux
<i class="fa fa-external-link-alt"></i></a></p><p>先决条件：必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。</p><blockquote><p>若要检查 Windows 版本及内部版本号，选择 Windows 徽标键 + R，然后键入“winver”，选择“确定” 。 可通过选择“开始”>“设置”>“Windows 更新”>“
<a href=ms-settings:windowsupdate title=检查更新>检查更新
</a>”来更新到最新的 Windows 版本。</p></blockquote><h3 id=选项一windows-subsystem-for-linux-preview>选项一：Windows Subsystem for Linux Preview
<a class=header-anchor href=#%e9%80%89%e9%a1%b9%e4%b8%80windows-subsystem-for-linux-preview></a></h3><p>使用本选项需要一些先决条件：</p><p>需要<strong>Windows 11内部版本 22000 或更高版本</strong>才能访问此功能。（可能需要加入 Windows 预览体验计划）。</p><ul><li><p>已安装适用于 vGPU 的驱动程序</p></li><li><p>若要运行 Linux GUI 应用，应首先安装与以下系统匹配的驱动程序。 这样，就可以使用虚拟 GPU (vGPU)，使你可受益于硬件加速 OpenGL 渲染。</p><ul><li><a href=https://www.intel.com/content/www/us/en/download/19344/intel-graphics-windows-dch-drivers.html title="适用于 WSL 的 Intel GPU 驱动程序" rel="noopener external nofollow noreferrer" target=_blank class=exturl>适用于 WSL 的 Intel GPU 驱动程序
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://www.amd.com/en/support/kb/release-notes/rn-rad-win-wsl-support title="适用于 WSL 的 AMD GPU 驱动程序" rel="noopener external nofollow noreferrer" target=_blank class=exturl>适用于 WSL 的 AMD GPU 驱动程序
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://developer.nvidia.com/cuda/wsl title="适用于 WSL 的 NVIDIA GPU 驱动程序" rel="noopener external nofollow noreferrer" target=_blank class=exturl>适用于 WSL 的 NVIDIA GPU 驱动程序
<i class="fa fa-external-link-alt"></i></a></li></ul></li></ul><p>然后使用 Microsoft Store 搜索
<a href="https://apps.microsoft.com/store/detail/windows-subsystem-for-linux-preview/9P9TQF7MRM4R?hl=en-us&amp;gl=US" title="Windows Subsystem for Linux Preview" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Windows Subsystem for Linux Preview
<i class="fa fa-external-link-alt"></i>
</a>进行安装，将会自动配置并获得 GUI 支持。</p><blockquote><p>有可能您需要使用 &ldquo;<code>Win</code>+<code>S</code> " 搜索「启用或关闭Windows功能」并勾选 「Hyper-V」和「适用于 Windows 的 Linux 子系统」选项。</p></blockquote><h3 id=选项二从命令行安装>选项二：从命令行安装
<a class=header-anchor href=#%e9%80%89%e9%a1%b9%e4%ba%8c%e4%bb%8e%e5%91%bd%e4%bb%a4%e8%a1%8c%e5%ae%89%e8%a3%85></a></h3><blockquote><p>必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。</p></blockquote><p>现在，可以在管理员 PowerShell 或 Windows 命令提示符中输入此命令，然后重启计算机来安装运行适用于 Linux 的 Windows 子系统 (WSL) 所需的全部内容。</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wsl --install
</span></span></code></pre></div><p>此命令将启用运行 WSL 并安装 Linux 的 Ubuntu 发行版所需的功能。 （
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/basic-commands#install-a-specific-linux-distribution title=可以更改此默认发行版 rel="noopener external nofollow noreferrer" target=_blank class=exturl>可以更改此默认发行版
<i class="fa fa-external-link-alt"></i>
</a>）。</p><p>首次启动新安装的 Linux 发行版时，将打开一个控制台窗口，要求你等待将文件解压缩并存储到计算机上。 未来的所有启动时间应不到一秒。</p><blockquote><p>上述命令仅在完全未安装 WSL 时才有效，如果运行 <code>wsl --install</code> 并查看 WSL 帮助文本，请尝试运行 <code>wsl --list --online</code> 以查看可用发行版列表并运行 <code>wsl --install -d &lt;DistroName></code> 以安装发行版。 若要卸载 WSL，请参阅
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/troubleshooting#uninstall-legacy-version-of-wsl title="卸载旧版 WSL" rel="noopener external nofollow noreferrer" target=_blank class=exturl>卸载旧版 WSL
<i class="fa fa-external-link-alt"></i>
</a>或
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/basic-commands#unregister-or-uninstall-a-linux-distribution title="注销或卸载 Linux 发行版" rel="noopener external nofollow noreferrer" target=_blank class=exturl>注销或卸载 Linux 发行版
<i class="fa fa-external-link-alt"></i>
</a>。</p></blockquote><h3 id=选项三旧版本的手动安装步骤>选项三：旧版本的手动安装步骤
<a class=header-anchor href=#%e9%80%89%e9%a1%b9%e4%b8%89%e6%97%a7%e7%89%88%e6%9c%ac%e7%9a%84%e6%89%8b%e5%8a%a8%e5%ae%89%e8%a3%85%e6%ad%a5%e9%aa%a4></a></h3><p>为简单起见，通常建议使用
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/install title="<code>wsl --install</code>" rel="noopener external nofollow noreferrer" target=_blank class=exturl><code>wsl --install</code>
<i class="fa fa-external-link-alt"></i>
</a>安装适用于 Linux 的 Windows 子系统，但如果运行的是旧版 Windows，则可能不支持这种方式。</p><p>具体而详地介绍安装 WSL 不是本文的主要目的，详细信息请参考官方文档：
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/install-manual title="旧版 WSL 的手动安装步骤" rel="noopener external nofollow noreferrer" target=_blank class=exturl>旧版 WSL 的手动安装步骤
<i class="fa fa-external-link-alt"></i></a></p><p>安装完成后，通过以下命令检查是否成功。</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wsl --status
</span></span></code></pre></div><p>例如，我执行完后，返回如下结果</p><blockquote><p>默认版本: 2
WSL 版本： 0.66.2.0
内核版本： 5.15.57.1
WSLg 版本： 1.0.42
MSRDC 版本： 1.2.3401
Direct3D 版本： 1.606.4
DXCore 版本： 10.0.25131.1002-220531-1700.rs-onecore-base2-hyp
Windows版本： 10.0.22622.586</p></blockquote><p>您应该会看到类似的结果。同时如果安装有问题，该命令还会提供一些额外信息帮助您解决问题。更多帮助可以参考官方文档。</p><p>在开始前还可以执行以下命令，防止可能出现的问题：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wsl --update
</span></span><span style=display:flex><span>wsl --set-default-version <span style=color:#d3869b>2</span>
</span></span></code></pre></div><h2 id=安装-ubuntu-2204>安装 Ubuntu-22.04
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-ubuntu-2204></a></h2><blockquote><p>在开始之前强烈建议您使用 Windows Terminal 获得最好的开发体验。如果是 Windows 10 用户，您可能需要从 Microsoft Store 搜索
<a href title="Windows Terminal">Windows Terminal
</a>进行安装，如果您是 Windows 11 用户，Windows Terminal 已成为 Windows 11 的默认终端程序。<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup></p><p>Windows 徽标键 + R，键入 &lsquo;wt&rsquo; 可以快捷地打开，或是在 Windows 11 中右键开始菜单/按下 &lsquo;win+x&rsquo;，选择「终端」。</p></blockquote><p>Microsoft Store 搜索 Ubuntu，就<strong>目前</strong>而言选择 Ubuntu 或是 Ubuntu 22.04.01 LTS 没有多大区别，但是本文大部分内容针对 Ubuntu 22.04 进行说明，如果担心兼容问题可以考虑安装 Ubuntu 22.04.01 LTS，目前我选择的 Ubuntu 进行安装。</p><blockquote><p>如果您通过选项一安装 WSL2，将会默认安装 WSLg，安装 Ubuntu 后，选择打开可能会弹出 GUI 安装界面。因为 WSLg 仍有一些问题，可以在解压完(Unpacking the distro&mldr; 结束后)直接关闭，Ubuntu 将继续在命令行界面中继续安装步骤。(也可在.wslconfig 中禁用 GUI Apps)</p></blockquote><p>此外，您也可以在 PowerShell 中使用以下命令：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wsl --install Ubuntu
</span></span></code></pre></div><h3 id=设置-linux-用户名和密码6>设置 Linux 用户名和密码<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>
<a class=header-anchor href=#%e8%ae%be%e7%bd%ae-linux-%e7%94%a8%e6%88%b7%e5%90%8d%e5%92%8c%e5%af%86%e7%a0%816></a></h3><p>如果您第一次启动您的 Linux 发行版（这里我们的 Linux 发行版为 Ubuntu）。 系统将要求你为您的 Linux 发行版创建「用户名」和「密码」。</p><ul><li>此<strong>用户名</strong>和<strong>密码</strong>特定于安装的每个单独的 Linux 分发版，与 Windows 用户名无关。</li><li>请注意，输入 <strong>密码</strong>时，屏幕上不会显示任何内容。 这称为盲目键入。 不会看到正在键入的内容，这完全正常。</li><li>创建<strong>用户名</strong>和<strong>密码</strong>后，该帐户将是分发版的默认用户，并将在启动时自动登录。</li><li>此帐户将被视为 Linux 管理员，能够运行 <code>sudo</code> (Super User Do) 管理命令。</li><li>在 WSL 上运行的每个 Linux 发行版都有其自己的 Linux 用户帐户和密码。 每当添加分发版、重新安装或重置时，都必须配置一个 Linux 用户帐户。</li></ul><blockquote><p>随 WSL 一起安装的 Linux 发行版是按用户安装，不可与其他 Windows 用户帐户共享。</p><p>遇到用户名错误？
<a href=https://serverfault.com/questions/73084/what-characters-should-i-use-or-not-use-in-usernames-on-linux title="StackExchange：在 Linux 上的用户名中，应使用或不使用哪些字符？" rel="noopener external nofollow noreferrer" target=_blank class=exturl>StackExchange：在 Linux 上的用户名中，应使用或不使用哪些字符？
<i class="fa fa-external-link-alt"></i></a></p></blockquote><p>如果需要额外的帮助，例如更改或重置密码，可以参考引用，并善用搜索引擎。</p><h3 id=设置中文>设置中文
<a class=header-anchor href=#%e8%ae%be%e7%bd%ae%e4%b8%ad%e6%96%87></a></h3><p>对于一些用户可能希望使用中文，如果安装时没有选择或没有提供选择，可以通过执行一下命令修改：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo dpkg-reconfigure locales
</span></span></code></pre></div><p>之后输入密码，根据提示操作。</p><p>在之后安装 KDE 过程中，如果想让 KDE 默认中文，也可以使用这一命令。</p><p>如果您是 Linux 新手，您应该有一点 bash 基础，我建议学习 MIT 的课程
<a href=https://missing.csail.mit.edu/ title="The Missing Semester of Your CS Education" rel="noopener external nofollow noreferrer" target=_blank class=exturl>The Missing Semester of Your CS Education
<i class="fa fa-external-link-alt"></i>
</a>。相关课程为
<a href=https://missing.csail.mit.edu/2020/course-shell/ title="Course Shell" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Course Shell
<i class="fa fa-external-link-alt"></i>
</a>。如果您访问 Youtube 或是 Github 有困难，或是对英语缺乏自信，这一节的内容在哔哩哔哩上也有汉化组的翻译，见
<a href=https://space.bilibili.com/1010983811/video title=@Missing_Semi_中译组 rel="noopener external nofollow noreferrer" target=_blank class=exturl>@Missing_Semi_中译组
<i class="fa fa-external-link-alt"></i>
</a>。目前只完成了$4/11$的课程视频资源翻译，并且在持续当鸽子。当然也可以通过其它的方式学习。</p><h3 id=更换软件源>更换软件源
<a class=header-anchor href=#%e6%9b%b4%e6%8d%a2%e8%bd%af%e4%bb%b6%e6%ba%90></a></h3><p><strong>高级打包工具</strong>（英语：<strong>Advanced Packaging Tools</strong>，缩写为<strong>APT</strong>）是
<a href=https://www.wikiwand.com/zh-cn/Debian title=Debian rel="noopener external nofollow noreferrer" target=_blank class=exturl>Debian
<i class="fa fa-external-link-alt"></i>
</a>及其派生的
<a href=https://www.wikiwand.com/zh-cn/%e8%bd%af%e4%bb%b6%e5%8c%85 title=Linux软件包 rel="noopener external nofollow noreferrer" target=_blank class=exturl>Linux软件包
<i class="fa fa-external-link-alt"></i>
</a>管理器。APT可以自动下载，配置，安装二进制或者源代码格式的
<a href=https://www.wikiwand.com/zh-cn/%e8%bd%af%e4%bb%b6%e5%8c%85 title=软件包 rel="noopener external nofollow noreferrer" target=_blank class=exturl>软件包
<i class="fa fa-external-link-alt"></i>
</a>，因此简化了
<a href=https://www.wikiwand.com/zh-cn/Unix title=Unix rel="noopener external nofollow noreferrer" target=_blank class=exturl>Unix
<i class="fa fa-external-link-alt"></i>
</a>系统上管理软件的过程。APT最早被设计成
<a href=https://www.wikiwand.com/zh-cn/Dpkg title=dpkg rel="noopener external nofollow noreferrer" target=_blank class=exturl>dpkg
<i class="fa fa-external-link-alt"></i>
</a>的前端，用来处理
<a href=https://www.wikiwand.com/zh-cn/Deb title=deb rel="noopener external nofollow noreferrer" target=_blank class=exturl>deb
<i class="fa fa-external-link-alt"></i>
</a>格式的软件包。现在经过APT-RPM组织修改，APT已经可以安装在支持
<a href=https://www.wikiwand.com/zh-cn/RPM%e5%a5%97%e4%bb%b6%e7%ae%a1%e7%90%86%e5%93%a1 title=RPM rel="noopener external nofollow noreferrer" target=_blank class=exturl>RPM
<i class="fa fa-external-link-alt"></i>
</a>的系统管理
<a href=https://www.wikiwand.com/zh-cn/RPM%e5%a5%97%e4%bb%b6%e7%ae%a1%e7%90%86%e5%93%a1 title=RPM rel="noopener external nofollow noreferrer" target=_blank class=exturl>RPM
<i class="fa fa-external-link-alt"></i>
</a>包。<sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup></p><p>由于 Ubuntu 配置的默认源并不是国内的服务器，下载更新软件都比较慢。可能需要换源来在使用 APT 时获得更好的下载速度。本人目前正在上海的学校学习，因此选择上海交通大学 Ubuntu 软件源镜像服务作为说明。如果您位于其他地区，可以参考您的地理位置选择合适的软件源。如果没有主意，国内可以选择清华源、中科大源或者阿里源等等进行配置，其官网都有对应的说明。</p><p>您可以通过</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>lsb_release -a
</span></span></code></pre></div><p>确定 Ubuntu 版本来选择合适的源。</p><p>以下使用方式参考https://mirrors.sjtug.sjtu.edu.cn/docs/ubuntu：</p><blockquote><p>使用
<code>sudo nano /etc/apt/sources.list</code>
打开镜像源列表文件。将类似于<code>http://cn.archive.ubuntu.com/ubuntu</code>或<code>http://cn.archive.ubuntu.com/ubuntu</code>的地址改成<code>https://mirror.sjtu.edu.cn/ubuntu</code>，之后按<code>Ctrl-O 回车</code>保存，按<code>Ctrl-X</code>退出。最后执行<code>sudo apt update</code>即可。</p><p>镜像站一天同步一次 Ubuntu 镜像。为了取得最新的安全更新，我们不建议您将 <code>security.ubuntu.com</code> 换成镜像源。</p><p>您也可使用
<code>sudo sed -i 's/http:\/\/cn.archive.ubuntu.com/https:\/\/mirror.sjtu.edu.cn/g' /etc/apt/sources.list</code>
指令直接批量修改。</p><p>以下为修改后的镜像源列表文件的示例。可使用<code>gedit</code>等文本编辑器修改<code>/etc/apt/sources.list</code>。修改后使用<code>sudo apt update</code>更新软件源。</p></blockquote><p>Ubuntu 22.04</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>deb https://mirror.sjtu.edu.cn/ubuntu/ jammy main restricted universe multiverse
</span></span><span style=display:flex><span># deb-src https://mirror.sjtu.edu.cn/ubuntu/ jammy main restricted universe multiverse
</span></span><span style=display:flex><span>deb https://mirror.sjtu.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
</span></span><span style=display:flex><span># deb-src https://mirror.sjtu.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
</span></span><span style=display:flex><span>deb https://mirror.sjtu.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
</span></span><span style=display:flex><span># deb-src https://mirror.sjtu.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
</span></span><span style=display:flex><span>deb https://mirror.sjtu.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
</span></span><span style=display:flex><span># deb-src https://mirror.sjtu.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># deb https://mirror.sjtu.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
</span></span><span style=display:flex><span># deb-src https://mirror.sjtu.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
</span></span></code></pre></div><p>其中<code>deb-src</code>为源码镜像，默认注释以提高速度。可将原镜像列表备份后替换为上述内容。</p><h3 id=安装-kubuntu-桌面组件>安装 Kubuntu 桌面组件
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-kubuntu-%e6%a1%8c%e9%9d%a2%e7%bb%84%e4%bb%b6></a></h3><p>这一步建议按照顺序，在进行之后的操作之前完成。</p><p>执行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt upgrade
</span></span><span style=display:flex><span>sudo apt install kubuntu-desktop
</span></span></code></pre></div><p>中途会提示一次「正在设定 encfs」，选择确定。</p><p>这一步会花点时间，取决于网络连接、电脑性能等等，可以先休息喝口水。</p><p>此外，之后的内容说明默认使用 Vim 作为文本编辑器进行说明，读者同样可以在 MIT 课程 The Missing Semester of Your CS Education 中学习到，或是善用互联网资源。</p><p>对于选择其他发行版进行实践的读者，即使不是 Arch Linux 的用户，Arch Linux 的 Wiki 也值得参考。当然，如果本身有好的文档，直接拿来用吧。</p><h2 id=关于-systemd-和-wsl>关于 Systemd 和 wsl
<a class=header-anchor href=#%e5%85%b3%e4%ba%8e-systemd-%e5%92%8c-wsl></a></h2><p>如果您按照文章的安装了 Ubuntu-22.04, 并且您对为何选择 genie 来让 WSL 启动 Systemd 不感兴趣，可以跳过这部分内容。若使用其他发行版，以下内容可能会对您有所帮助。</p><p>即使 WSL2 默认不会被全部安装，并且 Systemd 因为 WSL2 的启动方式的原因不能被安装在 WSL2 中。（简单来说 Systemd 需要运行在 PID 1。）虽然是这样设计的，但并不意味着通常在启动时运行的 GUI 不能正常的工作。对于想了解 WSL 与 Systemd 问题读者，可以参考以下资料：</p><blockquote><ul><li><p><a href=https://stackoverflow.com/questions/55579342/why-systemd-is-disabled-in-wsl title="why systemd is disabled in WSL?" rel="noopener external nofollow noreferrer" target=_blank class=exturl>why systemd is disabled in WSL?
<i class="fa fa-external-link-alt"></i></a></p></li><li><p><a href=https://superuser.com/questions/1719393/how-does-wsl-wsl2-wslg-work-without-systemd title="How does WSL/WSL2/WSLg work without systemd?" rel="noopener external nofollow noreferrer" target=_blank class=exturl>How does WSL/WSL2/WSLg work without systemd?
<i class="fa fa-external-link-alt"></i></a></p></li><li><p><a href=https://dev.to/bowmanjd/you-probably-don-t-need-systemd-on-wsl-windows-subsystem-for-linux-49gn title="You Probably Don&amp;rsquo;t Need systemd on WSL (Windows Subsystem for Linux)" rel="noopener external nofollow noreferrer" target=_blank class=exturl>You Probably Don&rsquo;t Need systemd on WSL (Windows Subsystem for Linux)
<i class="fa fa-external-link-alt"></i></a></p></li></ul></blockquote><p>对于 Systemd，目前有许多 workarounds, 在 wsl2 中启用 systemd 的方法至少有如下三种：</p><ul><li><a href=https://github.com/arkane-systems/genie title=genie rel="noopener external nofollow noreferrer" target=_blank class=exturl>genie
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://github.com/sorah/subsystemctl title=subsystemctl rel="noopener external nofollow noreferrer" target=_blank class=exturl>subsystemctl
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://github.com/nullpo-head/wsl-distrod title=wsl-distrod rel="noopener external nofollow noreferrer" target=_blank class=exturl>wsl-distrod
<i class="fa fa-external-link-alt"></i></a></li></ul><p>本文将使用 genie 作为说明，并会解释原因。</p><h4 id=genie>genie
<a class=header-anchor href=#genie></a></h4><p>genie 使得你能运行 systemd 作为 PID 1，同时启动所有的配套服务（这在之后的配置中节省了很多麻烦）。它通过创建一个 PID 命名空间和一个容器，让 Systemd 在其中运行来实现这一点，同时提供一些有用的快捷操作。</p><p>genie 只能运行在 WSL2 中，同时作者还为 Debian 系的发行版（当然包括 Linux）、Arch Linux 和 Fedora 提供维护，如果想要使用其他发行版，genie也当然值得一试。如果出现问题可以先在 GitHub 相关 issues 里寻找解决方法，当然也可以转而使用 wsl-distrod。</p><p>genie 经过几年打磨已经是个成熟的项目，相对于另外两个方法有比较多的文档可以参考，对于 Debian 系的发行版来说比较友好。</p><h4 id=subsystemctl>subsystemctl
<a class=header-anchor href=#subsystemctl></a></h4><p>灵感来源于
<a href=https://github.com/arkane-systems/genie title=arkane-systems/genie rel="noopener external nofollow noreferrer" target=_blank class=exturl>arkane-systems/genie
<i class="fa fa-external-link-alt"></i>
</a>但是使用 Rust 编写。</p><p>然而 subsystemctl 是一个比较新的项目，不兼容命令行。除了 Arch Linux 外有打好的包外，Debian/Ubuntu 需要用 cargo 自行编译。相对于 genie 主要使用 Python， 可能有更好的性能，但是需要完善。</p><p>同时使用 Networkd 会有一些别的问题。</p><h4 id=wsl-distrod>wsl-distrod
<a class=header-anchor href=#wsl-distrod></a></h4><p>简而言之，Distrod 是一个二进制文件，它会创建一个简单的容器，将 systemd 作为 init 进程，并在该容器中启动您的 wsl 会话。为了做到这一点， Distrod 做了以下事情：</p><blockquote><ol><li>修改具体发行版的 rootfs，以使其与 wsl 和 systemd 兼容。<ol><li>修改 systemd 服务，使其与 wsl 兼容。</li><li>把<code>/opt/distrod/bin/distrod</code>和其它资源放进 rootfs。</li><li>把 Distrod 二进制文件注册为登录 shell。</li></ol></li><li>当 Distrod 作为登录 shell 被 wsl 的 init 进程启动时，Distrod：<ol><li>在简单的容器中启动 systemd</li><li>在这个容器中启动你实际的 shell</li><li>在 systemd 会话和 wsl 交互环境间建立桥梁。</li></ol></li></ol></blockquote><p>在官方文档也有提到过：</p><blockquote><p>把 Distrod 作为一个独立的一次性命令：<strong>在这种情况下， distrod 的工作方式就像 genie 和 subsystemctl。</strong></p></blockquote><p>但是，Distrod 在自启动方面做了更多的工作。通过上述操作，Distrod 做到了：</p><ol><li>安装并启用后，启动 wsl 会自动启动 systmed。</li><li>添加<code>--start-on-windows-boot</code>参数后，Distrod 会注册一个 windows 任务，使得 wsl 在 windows 开机时就会运行。</li></ol><p>这样的做法虽然能被广泛的用于各种发行版，正如官方文档中它的安装方式一样：从
<a href=https://linuxcontainers.org title=linuxcontainers.org rel="noopener external nofollow noreferrer" target=_blank class=exturl>linuxcontainers.org
<i class="fa fa-external-link-alt"></i>
</a>上安装。这导致了安装多个不同的发行版会有额外的困难，正如它的一篇文档介绍的那样：
<a href=https://github.com/nullpo-head/wsl-distrod/blob/main/docs/references.md#install-and-run-multiple-distros-at-the-same-time title="Install and Run Multiple Distros at the same time" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Install and Run Multiple Distros at the same time
<i class="fa fa-external-link-alt"></i>
</a>. 而 WSL 的一大优势在于同时安装、运行多个 Linux 发行版，并且通常仅仅需要从 Microsoft Store 中选择或从 <code>wsl --list --online</code> 中选合适的发行版。</p><p>此外，subsystemctl 和 wsl-distrod 都只会启动必要的几个服务，使用时需要额外的更多工作。</p><h2 id=安装配置-systemd-genie89>安装配置 SystemD-Genie<sup id=fnref:8><a href=#fn:8 class=footnote-ref role=doc-noteref>8</a></sup><sup id=fnref:9><a href=#fn:9 class=footnote-ref role=doc-noteref>9</a></sup>
<a class=header-anchor href=#%e5%ae%89%e8%a3%85%e9%85%8d%e7%bd%ae-systemd-genie89></a></h2><p>正如仓库 README 介绍的那样，首次安装 genie 前最好阅读整个 README 页面，这会减少一大部分之后可能会遇到的困难，在开始之前，以下文章列表也许能帮助你更好地解决问题：</p><ol><li><a href=https://github.com/arkane-systems/genie title="arkane-systems / genie" rel="noopener external nofollow noreferrer" target=_blank class=exturl>arkane-systems / genie
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://github.com/arkane-systems/genie/wiki/WSLg-FAQ title="WSLg FAQ" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSLg FAQ
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://github.com/microsoft/wslg/discussions/144 title="lengthy description of WSLg architecture here" rel="noopener external nofollow noreferrer" target=_blank class=exturl>lengthy description of WSLg architecture here
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://github.com/arkane-systems/genie/wiki/Systemd-units-known-to-be-problematic-under-WSL title="known-problematic systemd units list" rel="noopener external nofollow noreferrer" target=_blank class=exturl>known-problematic systemd units list
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://github.com/arkane-systems/genie/wiki title="the genie wiki" rel="noopener external nofollow noreferrer" target=_blank class=exturl>the genie wiki
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://arkane-systems.github.io/wsl-transdebian/ title=wsl-transdebian rel="noopener external nofollow noreferrer" target=_blank class=exturl>wsl-transdebian
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://github.com/arkane-systems/genie/issues/266 title="Windows 11 + Genie 2.3: Genie seems stuck" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Windows 11 + Genie 2.3: Genie seems stuck
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://docs.microsoft.com/zh-cn/windows/wsl/basic-commands title="WSL 基本命令" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL 基本命令
<i class="fa fa-external-link-alt"></i></a></li><li><a href=https://docs.microsoft.com/zh-cn/windows/wsl/wsl-config#wslconfig title="WSL 中的高级配置" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL 中的高级配置
<i class="fa fa-external-link-alt"></i></a></li></ol><p>下面正式开始：</p><h3 id=安装-net-运行时>安装 .NET 运行时
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-net-%e8%bf%90%e8%a1%8c%e6%97%b6></a></h3><p>参考
<a href=https://docs.microsoft.com/zh-cn/dotnet/core/install/linux-ubuntu title="在 Ubuntu 上安装 .NET SDK 或 .NET 运行时" rel="noopener external nofollow noreferrer" target=_blank class=exturl>在 Ubuntu 上安装 .NET SDK 或 .NET 运行时
<i class="fa fa-external-link-alt"></i>
</a>根据架构和 Ubuntu 版本选择合适的安装方式，使用其他发行版的可参照同一页面上的介绍进行安装。对于 Ubuntu 22.04 LTS, 只需执行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo apt-get install -y dotnet-runtime-6.0
</span></span></code></pre></div><p>genie 的运行有赖于此。</p><h3 id=添加-wsl-transdebian-仓库>添加 wsl-transdebian 仓库
<a class=header-anchor href=#%e6%b7%bb%e5%8a%a0-wsl-transdebian-%e4%bb%93%e5%ba%93></a></h3><p>wsl-transdebain 是一个仅适用于 wsl 的 apt 仓库，
<a href=https://arkane-systems.github.io/wsl-transdebian/ title=wsl-transdebian rel="noopener external nofollow noreferrer" target=_blank class=exturl>wsl-transdebian
<i class="fa fa-external-link-alt"></i>
</a>列出了支持的发行版，如果你不是选择使用 Ubuntu 您也许需要检查一下是否支持您的发行版，否则参考
<a href=https://github.com/arkane-systems/genie title="arkane-systems / genie" rel="noopener external nofollow noreferrer" target=_blank class=exturl>arkane-systems / genie
<i class="fa fa-external-link-alt"></i>
</a>以继续安装。</p><p>首先，确保 lsb_release 可用</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>apt install lsb-release
</span></span></code></pre></div><p>接着配置 wsl-transdebian 仓库：</p><p>作为 root 用户 (<code>sudo -s</code>)， 输入接下来的命令：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>wget -O /etc/apt/trusted.gpg.d/wsl-transdebian.gpg https://arkane-systems.github.io/wsl-transdebian/apt/wsl-transdebian.gpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chmod a+r /etc/apt/trusted.gpg.d/wsl-transdebian.gpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat <span style=color:#b8bb26>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/wsl-transdebian.list
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>deb https://arkane-systems.github.io/wsl-transdebian/apt/ $(lsb_release -cs) main
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>deb-src https://arkane-systems.github.io/wsl-transdebian/apt/ $(lsb_release -cs) main
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apt update
</span></span></code></pre></div><p>在实践中，您也许注意到需要访问 GitHub，鉴于国内的网络情况（主要是第一行），这个过程可能十分缓慢，您也许需要为其配置代理。</p><p>本人使用
<a href=https://github.com/Fndroid/clash_for_windows_pkg title="Clash for Windows" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Clash for Windows
<i class="fa fa-external-link-alt"></i>
</a>作为代理客户端，对于有相同情况的读者可以参考
<a href=https://www.jianshu.com/p/af6a02f98d5a title="WSL 配置代理" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL 配置代理
<i class="fa fa-external-link-alt"></i>
</a>，否则请善用互联网。</p><h3 id=安装>安装
<a class=header-anchor href=#%e5%ae%89%e8%a3%85></a></h3><p>只需执行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install -y systemd-genie
</span></span></code></pre></div><h3 id=解决一些问题>解决一些问题
<a class=header-anchor href=#%e8%a7%a3%e5%86%b3%e4%b8%80%e4%ba%9b%e9%97%ae%e9%a2%98></a></h3><p>在开始前，请使用 <code>genie -h</code> 了解相关的命令：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>usage: genie [-h] [-V] [-v] [-a USER] (-i | -s | -l | -c ... | -u | -r | -b)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Handles transitions to the &#34;bottle&#34; namespace for systemd under WSL.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>optional arguments:
</span></span><span style=display:flex><span>  -h, --help            show this help message and exit # 显示本条帮助信息然后退出
</span></span><span style=display:flex><span>  -V, --version         show program&#39;s version number and exit # 显示版本号然后退出
</span></span><span style=display:flex><span>  -v, --verbose         display verbose progress messages # 显示冗长的处理消息
</span></span><span style=display:flex><span>  -a USER, --as-user USER
</span></span><span style=display:flex><span>                        specify user to run shell or command as (use with -s or -c) # 指明执行命令或启动 shell 的用户
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>commands:
</span></span><span style=display:flex><span>  -i, --initialize      initialize the bottle (if necessary) only # 仅初始化容器
</span></span><span style=display:flex><span>  -s, --shell           initialize the bottle (if necessary), and run a shell in it # 初始化容器并在其中打开一个 shell
</span></span><span style=display:flex><span>  -l, --login           initialize the bottle (if necessary), and open a logon prompt in it # 初始化容器并打开一个登录命令行
</span></span><span style=display:flex><span>  -c ..., --command ...
</span></span><span style=display:flex><span>                        initialize the bottle (if necessary), and run the specified command in it # 初始化容器并执行命令
</span></span><span style=display:flex><span>  -u, --shutdown        shut down systemd and exit the bottle # 终止 systemd 并退出容器
</span></span><span style=display:flex><span>  -r, --is-running      check whether systemd is running in genie, or not # 检测 systemd 是否运行在容器中
</span></span><span style=display:flex><span>  -b, --is-in-bottle    check whether currently executing within the bottle, or not # 检测目前的 shell 是否在容器中
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>For more information, see https://github.com/arkane-systems/genie/
</span></span></code></pre></div><p>genie 的配置文件为 <code>/etc/genie.ini</code> 为方便调试，我们这里使用 Vim 对其进行修改：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo vim /etc/genie.ini
</span></span></code></pre></div><p>将会看到：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[genie]
</span></span><span style=display:flex><span>secure-path=/lib/systemd:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
</span></span><span style=display:flex><span>update-hostname=true
</span></span><span style=display:flex><span>update-hostname-suffix=-wsl
</span></span><span style=display:flex><span>clone-path=false
</span></span><span style=display:flex><span>clone-env=WSL_DISTRO_NAME,WSL_INTEROP,WSLENV,DISPLAY,WAYLAND_DISPLAY,PULSE_SERVER
</span></span><span style=display:flex><span>systemd-timeout=240
</span></span><span style=display:flex><span>resolved-stub=false
</span></span><span style=display:flex><span>target-warning=true
</span></span></code></pre></div><p>对于 <code>systemd-timeout=240</code> 选项，我们需要暂时将其修改为 5, 该选项决定了容器在 systemd 进入 running 状态前会等待多久。</p><p>genie 设计为 systemd 默认目标(``default target<code>) 为 </code>multi-user.target` 下工作，为此，需要执行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl set-default multi-user.target
</span></span></code></pre></div><p>并显示：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Created symlink /etc/systemd/system/default.target → /lib/systemd/system/multi-user.target.
</span></span></code></pre></div><p>为了测试并解决问题，执行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>genie -s
</span></span></code></pre></div><p>如果遇到：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Waiting for systemd....!!!!!
</span></span><span style=display:flex><span>genie: systemd did not enter running state (unknown) after 5 seconds
</span></span><span style=display:flex><span>genie: this may be due to a problem with your systemd configuration
</span></span><span style=display:flex><span>genie: information on problematic units is available at https://github.com/arkane-systems/genie/wiki/Systemd-units-known-to-be-problematic-under-WSL
</span></span><span style=display:flex><span>genie: a list of failed units follows:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Failed to list units: 传输端点尚未连接
</span></span><span style=display:flex><span>genie: systemd in unsupported state &#39;unknown&#39;; cannot proceed
</span></span></code></pre></div><p>其中每新显示出一个 &lsquo;!&rsquo; 代表着等待了 1 秒，正如我们在 genie 配置文件中配置的那样，genie 应该在 5s 内完成启动，如果您感觉到启动时间远超过此时间，并且出现 <code>state 'unknown'</code>则根据
<a href=https://github.com/arkane-systems/genie/issues/290 title rel="noopener external nofollow noreferrer" target=_blank class=exturl><i class="fa fa-external-link-alt"></i>
</a>，您需要重启电脑并执行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl mask acpid
</span></span></code></pre></div><p>如果仍出现卡顿的情况，您可能需要参考
<a href=https://github.com/arkane-systems/genie/issues/266 title="Windows 11 + Genie 2.3: Genie seems stuck" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Windows 11 + Genie 2.3: Genie seems stuck
<i class="fa fa-external-link-alt"></i>
</a>中
<a href=https://github.com/PaulKGrimes title=@PaulKGrimes rel="noopener external nofollow noreferrer" target=_blank class=exturl>@PaulKGrimes
<i class="fa fa-external-link-alt"></i>
</a>中提到那样配置 <code>.wslconfig</code>文件（参考
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/wsl-config#wslconfig title="WSL 中的高级配置" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL 中的高级配置
<i class="fa fa-external-link-alt"></i>
</a>）并重启WSL（参考
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/basic-commands title="WSL 基本命令" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL 基本命令
<i class="fa fa-external-link-alt"></i>
</a>）。</p><p>即在你的 Windows 用户文件夹（C:\Users&lt;你的用户名>）下的<code>.wslconfig</code> 中添加一行<code>kernelCommandLine=systemd.unified_cgroup_hierarchy=1</code></p><p>接着执行<code>genie -s</code>, 您应该会看到类似以下的说明：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-zed data-lang=zed><span style=display:flex><span>Waiting for systemd....<span style=color:#fe8019>!!!!!</span>
</span></span><span style=display:flex><span>genie<span style=color:#fe8019>:</span> systemd did not enter running state (degraded) after 5 seconds
</span></span><span style=display:flex><span>genie<span style=color:#fe8019>:</span> this may be due to a problem with your systemd configuration
</span></span><span style=display:flex><span>genie<span style=color:#fe8019>:</span> information on problematic units is available at https<span style=color:#fe8019>:</span><span style=color:#928374;font-style:italic>//github.com/arkane-systems/genie/wiki/Systemd-units-known-to-be-problematic-under-WSL
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>genie<span style=color:#fe8019>:</span> a list of failed units follows<span style=color:#fe8019>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  UNIT                       LOAD   ACTIVE SUB    DESCRIPTION
</span></span><span style=display:flex><span>● ssh.service                loaded failed failed OpenBSD Secure Shell server
</span></span><span style=display:flex><span>● systemd<span style=color:#fe8019>-</span>remount<span style=color:#fe8019>-</span>fs.service loaded failed failed Remount Root and Kernel File Systems
</span></span><span style=display:flex><span>● systemd<span style=color:#fe8019>-</span>sysusers.service   loaded failed failed Create System Users
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>LOAD   <span style=color:#fe8019>=</span> Reflects whether the unit <span style=color:#fabd2f>definition</span> was properly loaded.
</span></span><span style=display:flex><span>ACTIVE <span style=color:#fe8019>=</span> The high<span style=color:#fe8019>-</span>level unit activation state, i.e. generalization of SUB.
</span></span><span style=display:flex><span>SUB    <span style=color:#fe8019>=</span> The low<span style=color:#fe8019>-</span>level unit activation state, values depend on unit type.
</span></span><span style=display:flex><span>3 loaded units listed.
</span></span><span style=display:flex><span>genie<span style=color:#fe8019>:</span> WARNING<span style=color:#fe8019>:</span> systemd is in degraded state, issues may occur<span style=color:#fe8019>!</span>
</span></span></code></pre></div><p>其中列出了三个未能正常启动的服务：<code>ssh.service</code>、<code>systemd-remount-fs.service </code>和 <code>systemd-sysusers.service</code>。对于不同的发行版可能会遇到不尽相同的错误，您需要参考
<a href=https://github.com/arkane-systems/genie/wiki/Systemd-units-known-to-be-problematic-under-WSL title="known-problematic systemd units list" rel="noopener external nofollow noreferrer" target=_blank class=exturl>known-problematic systemd units list
<i class="fa fa-external-link-alt"></i>
</a>和 Github issues 寻找解决方案，正如我们接下来所做的那样。</p><p><strong>ssh.service</strong></p><p>对于这个问题只需要简单地执行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo ssh-keygen -A
</span></span></code></pre></div><p><strong>systemd-remount-fs.service</strong></p><p>这个问题在
<a href=https://github.com/arkane-systems/genie/wiki/Systemd-units-known-to-be-problematic-under-WSL title="known-problematic systemd units list" rel="noopener external nofollow noreferrer" target=_blank class=exturl>known-problematic systemd units list
<i class="fa fa-external-link-alt"></i>
</a>有详细的说明，这里为了方便起见只需要删除<code>/etc/fstab</code>中的全部内容</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo vim /etc/fstab
</span></span></code></pre></div><p><code>/etc/fstab</code> 中的内容：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>LABEL=cloudimg-rootfs   /        ext4   discard,errors=remount-ro       0 1
</span></span></code></pre></div><p><strong>systemd-sysusers.service</strong></p><p>只需要在<code>/usr/lib/systemd/system/systemd-sysusers.service</code> 文件中这几行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>LoadCredential=passwd.hashed-password.root
</span></span><span style=display:flex><span>LoadCredential=passwd.plaintext-password.root
</span></span><span style=display:flex><span>LoadCredential=passwd.shell.root
</span></span></code></pre></div><p>后再添加一行</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>LoadCredential=
</span></span></code></pre></div><p>为了稳定，可以将 <code>/etc/genie.ini</code> 中的 <code>systemd-timeout</code> 重设为 20.</p><p>为了方便使用，参考
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/wsl-config#wslconfig title="WSL 中的高级配置" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL 中的高级配置
<i class="fa fa-external-link-alt"></i>
</a>在 <code>/etc/wsl.conf</code> 中添加：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[boot]
</span></span><span style=display:flex><span>command = genie -i
</span></span></code></pre></div><p>这样在 Ubuntu 启动时就会自动启动 genie.</p><p>注意，您应该在 KDE 中设置永不锁屏。</p><p><strong>备用手段</strong></p><p>如果您完全没有任何思路解决启动时列出的 unit 的问题，用 <code>sudo systemctl mask &lt;服务名></code> 命令来禁止其启动。</p><h2 id=使用-x410-结合-wsl2-运行-kde-桌面环境>使用 x410 结合 WSL2 运行 KDE 桌面环境
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8-x410-%e7%bb%93%e5%90%88-wsl2-%e8%bf%90%e8%a1%8c-kde-%e6%a1%8c%e9%9d%a2%e7%8e%af%e5%a2%83></a></h2><p>诚然，您可以用 VcXsrv 实现类似的效果，它是开源免费的，并且可以在 Sourceforge 上
<a href=https://sourceforge.net/projects/vcxsrv/ title=下载 rel="noopener external nofollow noreferrer" target=_blank class=exturl>下载
<i class="fa fa-external-link-alt"></i>
</a>。</p><p>x410 有着更为现代的界面和更详细的文档。您可以在 Microsoft Store 上获取，价格 354 元（目前2022年8月27日发现正在进行 4.1 折的折扣，价格 144 元），而淘宝上也有售卖兑换码，价格为 68 元。</p><p>您可以通过微软商店获得试用版进行试用。</p><p>通过 x410 作为 X-Server 转发 GUI 在 Linux 中开发的一个好处是 WSL2 可以专注于解决编程需求，而不需要去折腾QQ、微信等，这些任务可以在 Windows 上完成。</p><p>开始之前您需要勾选 x410 中的 <code>Hyper-V (Default-Switch)</code>、<code>WSL2</code>、<code>Hyper-V</code> 和 <code>WSL2 (experimental)</code>.</p><h3 id=配置-display-环境变量1011>配置 DISPLAY 环境变量[^10]<sup id=fnref:10><a href=#fn:10 class=footnote-ref role=doc-noteref>10</a></sup>
<a class=header-anchor href=#%e9%85%8d%e7%bd%ae-display-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f1011></a></h3><p>本小节主要参考
<a href=https://x410.dev/cookbook/wsl/using-x410-with-wsl2/ title="Using X410 with WSL2" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Using X410 with WSL2
<i class="fa fa-external-link-alt"></i>
</a>，其中列出了三种方式，这里只选择其中一种作为说明。如果想了解更多方法或这里列出的方法不起作用，可以参考那篇文章。</p><p>默认情况下，当年启动 WSL2, Windows 会自动在 Linux 目录下生成 <code>/etc/resolv.conf</code>文件。所以你可以从中解析出 Windows 的 IP 并通过以下方式赋给 DISPLAY 环境变量：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#fabd2f>export</span> DISPLAY<span style=color:#fe8019>=</span><span style=color:#fe8019>$(</span>cat /etc/resolv.conf | grep nameserver | awk <span style=color:#b8bb26>&#39;{print $2; exit;}&#39;</span><span style=color:#fe8019>)</span>:0.0
</span></span></code></pre></div><p>我们考虑将其写入 <code>~/.profile</code> 文件中，这样当年你每次以该用户身份登录 bash 时就会自动地更新地址。</p><p>之后切换 x410 处于 Floating Desktop 模式，在终端中输入：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>genie -c bash --login -c tplasma-x11
</span></span></code></pre></div><p>应该就能看见 KDE 桌面启动。</p><p>如果仍有问题，您应该尝试文中的其他方法。</p><h3 id=为你的-kubuntu-设置快捷方式12>为你的 Kubuntu 设置快捷方式<sup id=fnref:11><a href=#fn:11 class=footnote-ref role=doc-noteref>11</a></sup>
<a class=header-anchor href=#%e4%b8%ba%e4%bd%a0%e7%9a%84-kubuntu-%e8%ae%be%e7%bd%ae%e5%bf%ab%e6%8d%b7%e6%96%b9%e5%bc%8f12></a></h3><p>建议您将本节创建的文件存放在您的 OneDrive 中以获得跨设备同步。</p><p>首先，创建一个 Windows batch 文件(*.bat)，它应该包含以下内容：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-batch data-lang=batch><span style=display:flex><span>@<span style=color:#fe8019>echo</span> off
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>REM ### 以桌面模式启动 x410</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>start</span> /B x410.exe /desktop
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>REM ### 启动 KDE 桌面环境</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ubuntu.exe run <span style=color:#b8bb26>&#34;genie -r;if [ $? == &#34;</span>0<span style=color:#b8bb26>&#34; ]; then genie -c bash --login -c startplasma-x11; else genie -i &amp;&amp; genie -c bash --login -c startplasma-x11; fi&#34;</span>
</span></span></code></pre></div><p>您应该将 Ubuntu 换成您对应的发行版。不妨将其命名为<code>kubuntu.bat</code>.</p><p>接着，创建一个 VB 脚本文件来静默地执行上述的脚本，而不用忍受运行时弹出的一个黑黑的命令行界面：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>If WScript.Arguments.Count &lt;= 0 Then
</span></span><span style=display:flex><span>    WScript.Quit
</span></span><span style=display:flex><span>End If
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bat = Left(WScript.ScriptFullName, InStrRev(WScript.ScriptFullName, &#34;\&#34;)) &amp; WScript.Arguments(0) &amp; &#34;.bat&#34;
</span></span><span style=display:flex><span>arg = &#34;&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>If WScript.Arguments.Count &gt; 1 Then
</span></span><span style=display:flex><span>    arg = WScript.Arguments(1)
</span></span><span style=display:flex><span>End If
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CreateObject(&#34;WScript.Shell&#34;).Run &#34;&#34;&#34;&#34; &amp; bat &amp; &#34;&#34;&#34; &#34;&#34;&#34; &amp; arg &amp; &#34;&#34;&#34;&#34;, 0, False
</span></span></code></pre></div><p>不妨将其命名为 <code>bat-launcher.vbs</code> .</p><p>最后，我们来创建一个桌面快捷方式。</p><p>右键空白处，选择创建一个快捷方式，对象的位置填写：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>wscript.exe &#34;&lt;您的VB脚本存放位置&gt;\bat-launcher.vbs&#34; &#34;kubuntu&#34;
</span></span></code></pre></div><p>您可以通过右键创建好的快捷方式选择「属性→快捷方式→更改图标」修改创建好的图标。</p><p>对于 Ubuntu 您可以通过
<a href=https://assets.ubuntu.com/v1/49a1a858-favicon-32x32.png title=https://assets.ubuntu.com/v1/49a1a858-favicon-32x32.png rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://assets.ubuntu.com/v1/49a1a858-favicon-32x32.png
<i class="fa fa-external-link-alt"></i>
</a>来获得 Ubuntu 的 PNG 格式图标，需要您自行寻找 ico、icl 或 dll 格式的图标（例如格式转换）。</p><p>最后，您还可以通过右键该快捷方式将其固定到 Windows 开始菜单或是任务栏。</p><h3 id=安装-firefox>安装 Firefox
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-firefox></a></h3><p>也许您注意到了，在您的 Ubuntu 22.04 中没有出现 Firefox 的身影，这是因为从 Ubuntu 22.04 开始，将仅在 snap 中提供 Firefox<sup id=fnref:12><a href=#fn:12 class=footnote-ref role=doc-noteref>12</a></sup>，而 snap 的运行有赖于 systemd，因此我们的 kubuntu 上没有 Firefox。</p><p>诚然，这样做有一些优点，但许多人还是更喜欢传统的从 APT 安装的方式，因此催生了一大批相关的文章介绍如何以传统的方式安装，而且在我们之后的实践中，snap 版本的 Firefox 存在一些问题，我们将参考
<a href=https://ubuntuhandbook.org/index.php/2022/04/install-firefox-deb-ubuntu-22-04/ title="How to Install Latest Firefox as classic Deb in Ubuntu 22.04" rel="noopener external nofollow noreferrer" target=_blank class=exturl>How to Install Latest Firefox as classic Deb in Ubuntu 22.04
<i class="fa fa-external-link-alt"></i>
</a>使得您能使用 apt 安装 Firefox.</p><ol><li><p>添加 Mozilla 基金会的 PPA (Personal Package Archive)</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo add-apt-repository ppa:mozillateam/ppa
</span></span></code></pre></div><p>受限于网络原因，这个过程可能有点缓慢。</p></li><li><p>因为 snap 版本的 Firefox 在 Ubuntu 仓库中有着更高的版本号，因此我们需要调整 PPA 版 Firefox 的优先级。</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo vim /etc/apt/preferences.d/mozillateamppa
</span></span></code></pre></div><p>这个命令会创建一个新的文件，请写入如下信息：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Package: firefox*
</span></span><span style=display:flex><span>Pin: release o=LP-PPA-mozillateam
</span></span><span style=display:flex><span>Pin-Priority: 501
</span></span></code></pre></div></li><li><p>保存文件后，请执行命令 <code>sudo apt update</code> ，这步非常重要，否则会安装为 Ubuntu 16.04 设计的旧版本的 Firefox.</p></li><li><p>最后，使用 APT 安装您的 Firefox.</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt install firefox
</span></span></code></pre></div></li></ol><p><strong>设置网络代理</strong></p><p>本人使用 Clash for Windows 作为代理客户端。启动您 Windows 上的 Clash for Windows 的 TUN 模式，启动该模式后 CFW 会设置一张虚拟网卡接受整个系统的流量，您具体可以参考
<a href=https://docs.cfw.lbyczf.com/contents/tun.html#windows title="TUN 模式" rel="noopener external nofollow noreferrer" target=_blank class=exturl>TUN 模式
<i class="fa fa-external-link-alt"></i>
</a>来开启。</p><p>之后，你可以通过 Allow Lan 旁的标志查看 <code>netowork interface</code> 找到 Clash 虚拟网卡的 IP地址，一般为 <strong>198.18.0.1</strong>.</p><p>接着，打开 KDE 的设置→网络设置→代理→使用手动配置的代理服务器→填入198.18.0.1→端口设置为7890→勾选所有协议都使用同样的代理服务器。</p><p>最后，因为一些原因，Firefox 和 Chrome 浏览器不会遵循系统的代理配置，所以类似地，您需要手动为其设置代理：</p><p>设置→常规→滚动到底部为其设置网络连接→同样的为其手动设置代理服务器。</p><p>同样的，我们准备一份<code>firefox.bat</code> :</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-batch data-lang=batch><span style=display:flex><span>@<span style=color:#fe8019>echo</span> off
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>REM ### 以窗口模式启动 x410</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fe8019>start</span> /B x410.exe /wm
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>REM ### 启动 firefox</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ubuntu.exe run <span style=color:#b8bb26>&#34;genie -r;if [ $? == &#34;</span>0<span style=color:#b8bb26>&#34; ]; then genie -c bash --login -c firefox; else genie -i &amp;&amp; genie -c bash --login -c firefox; fi&#34;</span>
</span></span></code></pre></div><p><strong>注意：</strong> x410 的启动参数变成了 /wm 意味着 x410 将以窗口化应用启动。</p><p>同样的，您的 batch 脚本应该和 VBScript 脚本应该位于同一文件夹下，快捷方式选择为：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>wscript.exe &#34;&lt;您的VB脚本存放位置&gt;\bat-launcher.vbs&#34; &#34;firefox&#34;
</span></span></code></pre></div><p>您可以从
<a href=https://design.firefox.com/photon/visuals/product-identity-assets.html title="Product Identity Assets" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Product Identity Assets
<i class="fa fa-external-link-alt"></i>
</a>下载 Firefox 的 Logo，并设置其为您的快捷方式的图标。</p><p>通过类似的方式，您可以创建一批快捷方式，方便您迅速地打开 Linux 桌面应用。</p><p>现在的体验基本和 WSLg 没有区别了，如果您开启了 WSLg，那么为了防止冲突，我们这里参考
<a href=https://docs.microsoft.com/zh-cn/windows/wsl/wsl-config#wslconfig title="WSL 中的高级配置" rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL 中的高级配置
<i class="fa fa-external-link-alt"></i>
</a>中的说明，在 <code>.wslconfig</code> 文件中添加：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>guiApplications=false
</span></span></code></pre></div><p>但是，我们的方法还有一点和 WSLg 有差距—— 声音。接下来将解释如何操作。</p><h3 id=开启声音14>开启声音<sup id=fnref:13><a href=#fn:13 class=footnote-ref role=doc-noteref>13</a></sup>
<a class=header-anchor href=#%e5%bc%80%e5%90%af%e5%a3%b0%e9%9f%b314></a></h3><p>x410 的文档中有关于让您的 WSL 发声的办法，不过那篇文章写于 2018 年 6 月 1 日，且针对的 WSL1. 不过知乎老哥根据这篇文章写了新的方法，这里我们将参考这两篇文章让我们的体验更完善。</p><ol><li><p>下载 Pulse-Audio for Windows 的压缩包：
<a href="https://link.zhihu.com/?target=http%3A//bosmans.ch/pulseaudio/pulseaudio-1.1.zip" title=下载 rel="noopener external nofollow noreferrer" target=_blank class=exturl>下载
<i class="fa fa-external-link-alt"></i>
</a>，为防止变化放上下载页面：
<a href=https://www.freedesktop.org/wiki/Software/PulseAudio/Ports/Windows/Support/ title="Pulse-Audio on Windows" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Pulse-Audio on Windows
<i class="fa fa-external-link-alt"></i></a></p></li><li><p>将压缩包解压到合适的地方，你需要记住这个位置</p></li><li><p>在解压完的目录下，找到 .\etc\pulse\default.pa 文件，修改第 <strong>42</strong> 行的内容如下（实际上就是在末尾增加 <code>record=0</code>）</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>load-module module-waveout sink_name<span style=color:#fe8019>=</span>output source_name<span style=color:#fe8019>=</span>input record<span style=color:#fe8019>=</span><span style=color:#d3869b>0</span>
</span></span></code></pre></div><p>继续修改第 <strong>61</strong> 行内容如下：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>load-module module-native-protocol-tcp auth-anonymous<span style=color:#fe8019>=</span><span style=color:#d3869b>1</span>
</span></span></code></pre></div><p>该配置会允许局域网内所有匿名终端都可以访问<code>PulseAudioServer</code>服务(使用tcp 4713端口)，保存并关闭<code>default.pa</code>文件。</p></li><li><p>再编辑<code>etc\pulse\daemon.conf</code>文件,修改第<code>39</code>行,取消注释后改为下面内容:</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>exit-idle-time <span style=color:#fe8019>=</span> -1
</span></span></code></pre></div><p>这个选项是配置<code>PulseAudio Server</code>不会在空闲时自动退出。</p></li><li><p>从命令行打开<code>bin\pulseaudio.exe</code>进行测试，此时 Windows 安全中心会弹出防火墙警示，选择确认。</p></li><li><p>回到 WSL2 中，编辑 <code>~/.profile</code> 添加：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#fabd2f>export</span> PULSE_SERVER<span style=color:#fe8019>=</span>tcp:<span style=color:#fe8019>$(</span>cat /etc/resolv.conf | grep nameserver | awk <span style=color:#b8bb26>&#39;{print $2; exit;}&#39;</span><span style=color:#fe8019>)</span>
</span></span></code></pre></div></li><li><p>修改完后还需要刷新下</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#fabd2f>source</span> ~/.profile
</span></span></code></pre></div></li><li><p>修改我们的 <code>firefox.bat</code> 脚本</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>@echo off
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>REM <span style=color:#928374;font-style:italic>### 以窗口模式启动 x410</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>start /B x410.exe /wm
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>REM <span style=color:#928374;font-style:italic>### 启动 pulseaudio</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>start <span style=color:#b8bb26>&#34;&#34;</span> /B <span style=color:#b8bb26>&#34;&lt;您的 pulse-audio 的解压位置&gt;\bin\pulseaudio.exe&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>REM <span style=color:#928374;font-style:italic>### 启动 firefox</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ubuntu.exe run <span style=color:#b8bb26>&#34;genie -r;if [ </span>$?<span style=color:#b8bb26> == &#34;</span>0<span style=color:#b8bb26>&#34; ]; then genie -c bash --login -c firefox; else genie -i &amp;&amp; genie -c bash --login -c firefox; fi&#34;</span>
</span></span></code></pre></div></li></ol><h2 id=visual-studio-code>Visual Studio Code
<a class=header-anchor href=#visual-studio-code></a></h2><p>Visual Studio Code 目前是对 WSL 支持最好的开发工具，我将向您介绍它如何提升 WSL 的开发体验。</p><p>当然，首先您需要下载安装 Visual Studio Code:</p><p><a href=https://code.visualstudio.com/ title="Vistual Studio Code &amp;ldquo;Code editing. <strong>Redefined.</strong>&amp;quot;——Free. Built on open source. Runs everywhere." rel="noopener external nofollow noreferrer" target=_blank class=exturl>Vistual Studio Code &ldquo;Code editing. <strong>Redefined.</strong>"——Free. Built on open source. Runs everywhere.
<i class="fa fa-external-link-alt"></i></a></p><p>一般情况是选择 Windows 64bit System Installer 下载安装。</p><blockquote><p>VSCode 还有一个社区驱动的分支——
<a href=https://vscodium.com/ title=VSCodium rel="noopener external nofollow noreferrer" target=_blank class=exturl>VSCodium
<i class="fa fa-external-link-alt"></i>
</a>，移除了微软相关的服务防止信息被跟踪泄露，但同时也意味着无法通过微软的服务轻松获取插件和同步设置，对个人隐私有要求或有开源洁癖的同学可以了解下。</p></blockquote><p>要让 VS Code 和 WSL 一起工作，您需要在您的 WSL 中安装 <code>Remote-WSL</code> 拓展。安装此拓展后，VS Code 会在您的 Linux 中安装 VS Code Server 你可以使用 Windows 上 VS Code 的 UI，而将你的工具、语言和编译器等放到 Linux 中。</p><ul><li>按 <code>F1</code> 打开命令面板，通过 Remote-WSL 的几条命令或是在 WSL 的 bash 里使用 code 命令打开文件夹或工作区。</li></ul><h3 id=c-gccclangdcmakeninja>C++: GCC+Clangd+CMake+Ninja
<a class=header-anchor href=#c-gccclangdcmakeninja></a></h3><p>C/C++ 通常是许多人第一次接触到编程语言，我们以 C++ 开始作为配置编程的第一次实践。</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt install gcc g++ gdb llvm lldb clang clang++ clangd clang-format clang-tidy cmake ninja
</span></span></code></pre></div><p>主要检查 clang++ 版本：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>clang++ --v
</span></span></code></pre></div><p>会看到类似：</p><blockquote><p>Ubuntu clang version 14.0.0-1ubuntu1
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/bin
Found candidate GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/11
Selected GCC installation: /usr/bin/../lib/gcc/x86_64-linux-gnu/11
Candidate multilib: .;@m64
Selected multilib: .;@m64</p></blockquote><p>主要检查是否找到标准库，否则容易出现头文件未找到的问题，即 <code>Found candidate GCC installation</code> 字样。</p><p>接着安装 VS Code 拓展：clangd、CodeLLDB、CMake 和 CMake Tools 拓展。</p><p>检查 clangd 版本：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-shell data-lang=shell><span style=display:flex><span>clangd --version
</span></span></code></pre></div><p>可以从官方网站获得帮助：
<a href=https://clangd.llvm.org/ title=https://clangd.llvm.org/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://clangd.llvm.org/
<i class="fa fa-external-link-alt"></i></a></p><p>对于 clangd 插件，用 <code>clangd --help-list</code> l查看可用的参数，来配置其行为，下面是我的 <code>settings.json</code> 的相关部分, 供您参考：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#fb4934>&#34;editor.inlayHints.enabled&#34;</span>: <span style=color:#b8bb26>&#34;onUnlessPressed&#34;</span>,
</span></span><span style=display:flex><span>/*&lt;--------------------------------------------------------------------------&gt;*/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#928374;font-style:italic>// Extesions&#39; Settings
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>    /*&lt;----------------------------------------------------------------------&gt;*/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#928374;font-style:italic>// clangd
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>    /**
</span></span><span style=display:flex><span>     * This setting is relevant to clangd&#39;s version, use command:
</span></span><span style=display:flex><span>     * &#39;clangd --version&#39; to check
</span></span><span style=display:flex><span>     * and use `clangd --help-list` to get reference.
</span></span><span style=display:flex><span>     *
</span></span><span style=display:flex><span>     * Ubuntu clangd version 14.0.0-1ubuntu1
</span></span><span style=display:flex><span>     * Features: linux+grpc
</span></span><span style=display:flex><span>     * Platform: x86_64-pc-linux-gnu
</span></span><span style=display:flex><span>     */
</span></span><span style=display:flex><span>    <span style=color:#fb4934>&#34;clangd.arguments&#34;</span>: [
</span></span><span style=display:flex><span>        /*&lt;------------------------------------------------------------------&gt;*/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// clangd compilation flags options:
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         *  pecify a path to look for compile_commands.json. If path is
</span></span><span style=display:flex><span>         *  invalid, clangd will look in the current directory and parent
</span></span><span style=display:flex><span>         *  paths of each source file.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--compile-commands-dir=${command:cmake.launchTargetPath}&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Comma separated list of globs for white-listing gcc-compatible
</span></span><span style=display:flex><span>         * drivers that are safe to execute. Drivers matching any of these
</span></span><span style=display:flex><span>         * globs will be used to extract system includes.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//  e.g. /usr/bin/**/clang-*,/path/to/repo/**/g++-*
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//  &#34;--query-driver=&lt;string&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /*&lt;------------------------------------------------------------------&gt;*/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>//  clangd feature options:
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * If set to <span style=color:#fe8019>true</span>, code completion will include index symbols that
</span></span><span style=display:flex><span>         * are not defined in the scopes (e.g. namespaces) visible from the
</span></span><span style=display:flex><span>         * code completion point. Such completions can insert scope qualifiers
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--all-scopes-completion&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// Index project code in the background and persist index on disk
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>//  &#34;--background-index&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>// Enable clang-tidy diagnostics
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#b8bb26>&#34;--clang-tidy&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * --completion-parse=&lt;value&gt;
</span></span><span style=display:flex><span>         * Whether the clang-parser is used for code-completion
</span></span><span style=display:flex><span>         * =always   -   Block until the parser can be used
</span></span><span style=display:flex><span>         * =auto     -   Use text-based completion if the parser is not ready
</span></span><span style=display:flex><span>         * =never    -   Always used text-based completion
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--completion-parse=&lt;value&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * --completion-style=&lt;value&gt;
</span></span><span style=display:flex><span>         * Granularity of code completion suggestions
</span></span><span style=display:flex><span>         * =detailed   -   One completion item for each semantically distinct
</span></span><span style=display:flex><span>         *                 completion, with full type information
</span></span><span style=display:flex><span>         * =bundled    -   Similar completion items (e.g. function overloads)
</span></span><span style=display:flex><span>         *                 are combined. Type information shown where possible
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;-completion-style=detailed&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// Show origins of completion items
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#928374;font-style:italic>// &#34;--debug-origin&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * this option may differ from clang-format&#39;s version, check it with
</span></span><span style=display:flex><span>         * &#39;clang-format --version&#39;
</span></span><span style=display:flex><span>         *
</span></span><span style=display:flex><span>         * Ubuntu clang-format version <span style=color:#d3869b>14.0</span>.<span style=color:#d3869b>0-1</span>ubuntu<span style=color:#d3869b>1</span>
</span></span><span style=display:flex><span>         *
</span></span><span style=display:flex><span>         * clang-format style to apply by default when no .clang-format file
</span></span><span style=display:flex><span>         * is found. Possible values:
</span></span><span style=display:flex><span>         * LLVM、Google、Chromium、Mozilla、Webkit、Microsoft、GNU
</span></span><span style=display:flex><span>         * InheriteParentConfig:Not a real style, but allows to use the
</span></span><span style=display:flex><span>         * .clang-format file from the parent directory (or its parent if
</span></span><span style=display:flex><span>         * there is none). If there is no parent file found it falls back to
</span></span><span style=display:flex><span>         * the fallback style, and applies the changes to that.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--fallback-style=Microsoft&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * When disabled, completions contain only parentheses for function
</span></span><span style=display:flex><span>         * calls.
</span></span><span style=display:flex><span>         * When enabled, completions also contain placeholders formethod
</span></span><span style=display:flex><span>         * parameters.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--function-arg-placeholders&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * --header-insertion=&lt;value&gt;
</span></span><span style=display:flex><span>         * Add #include directives when accepting code completions
</span></span><span style=display:flex><span>           =iwyu    -   Include what you use. Insert the owning header for
</span></span><span style=display:flex><span>                        top-level symbols, unless the header is already
</span></span><span style=display:flex><span>                        directly included or the symbol is forward-declared
</span></span><span style=display:flex><span>           =never   -   Never insert #include directives as part of code
</span></span><span style=display:flex><span>                        completion
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--header-insertion=iwyu&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Prepend a circular dot or space before the completion label,
</span></span><span style=display:flex><span>         * depending on whether an include line will be inserted or not
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--header-insertion-decorators&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Limit the number of references returned by clangd.
</span></span><span style=display:flex><span>         * <span style=color:#d3869b>0</span> means no limit (default=<span style=color:#d3869b>1000</span>)
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--limit-references=1000&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Limit the number of results returned by clangd.
</span></span><span style=display:flex><span>         * <span style=color:#d3869b>0</span> means no limit (default=<span style=color:#d3869b>100</span>)
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--limit-results=100&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Path to the project root. Requires remote-index-address to be set.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--project-root=&lt;string&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * --ranking-model=&lt;value&gt;
</span></span><span style=display:flex><span>         * Model to use to rank code-completion items
</span></span><span style=display:flex><span>         * =heuristics        -   Use hueristics to rank code completion items
</span></span><span style=display:flex><span>         * =decision_forest   -   Use Decision Forest model to rank completion
</span></span><span style=display:flex><span>         *                        items
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--ranking-model=decision_forest&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Address of the remote index server
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--remote-index-address=&lt;string&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /*&lt;------------------------------------------------------------------&gt;*/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// clangd miscellaneous options:
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Parse one file in isolation instead of acting as a language server.
</span></span><span style=display:flex><span>         * Useful to investigate/reproduce crashes or configuration problems.
</span></span><span style=display:flex><span>         * With --check=&lt;filename&gt;, attempts to parse a particular file.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--check[=&lt;string&gt;]&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * If specified, limits the range of tokens in -check file on which
</span></span><span style=display:flex><span>         * various features are tested.
</span></span><span style=display:flex><span>         * Example --check-lines=<span style=color:#d3869b>3-7</span> restricts testing to lines <span style=color:#d3869b>3</span> to <span style=color:#d3869b>7</span>
</span></span><span style=display:flex><span>         * (inclusive) or --check-lines=<span style=color:#d3869b>5</span> to restrict to one line.
</span></span><span style=display:flex><span>         * Default is testing entire file.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--check-lines[=&lt;string&gt;]&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Read user and project configuration from YAML files.
</span></span><span style=display:flex><span>         * Project config is from a .clangd file in the project directory.
</span></span><span style=display:flex><span>         * User config is from clangd/config.yaml in the following directories:
</span></span><span style=display:flex><span>         * Windows: %USERPROFILE%\AppData\Local
</span></span><span style=display:flex><span>         * Mac OS: ~/Library/Preferences/
</span></span><span style=display:flex><span>         * Others: $XDG_CONFIG_HOME, usually ~/.config
</span></span><span style=display:flex><span>         * Configuration is documented at https:<span style=color:#928374;font-style:italic>//clangd.llvm.org/config.html
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--enable-config&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Number of async workers used by clangd. Background index also uses
</span></span><span style=display:flex><span>         * this many workers.
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;-j=12&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * Release memory periodically via malloc_trim(<span style=color:#d3869b>3</span>).
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--malloc-trim&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * --pch-storage=&lt;value&gt;
</span></span><span style=display:flex><span>         *   =disk     -   store PCHs on disk
</span></span><span style=display:flex><span>         *   =memory   -   store PCHs in memory
</span></span><span style=display:flex><span>         * Storing PCHs in memory increases memory usages, but may improve
</span></span><span style=display:flex><span>         * performance
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#b8bb26>&#34;--pch-storage=memory&#34;</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        /*&lt;------------------------------------------------------------------&gt;*/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// clangd protocol and logging options:
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * --log=&lt;value&gt;
</span></span><span style=display:flex><span>         * Verbosity of log messages written to stderr
</span></span><span style=display:flex><span>         * =error     -   Error messages only
</span></span><span style=display:flex><span>         * =info      -   High level execution tracing
</span></span><span style=display:flex><span>         * =verbose   -   Low level details
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--offset-encoding=&lt;value&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        /**
</span></span><span style=display:flex><span>         * --offset-encoding=&lt;value&gt;
</span></span><span style=display:flex><span>         * Force the offsetEncoding used for character positions. This bypasses
</span></span><span style=display:flex><span>         * negotiation via client capabilities
</span></span><span style=display:flex><span>         * =utf<span style=color:#d3869b>-8</span>    -   Offsets are in UTF<span style=color:#d3869b>-8</span> bytes
</span></span><span style=display:flex><span>         * =utf<span style=color:#d3869b>-16</span>   -   Offsets are in UTF<span style=color:#d3869b>-16</span> code units
</span></span><span style=display:flex><span>         * =utf<span style=color:#d3869b>-32</span>   -   Offsets are in unicode codepoints
</span></span><span style=display:flex><span>         */
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// &#34;--offset-encoding=&lt;value&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>
</span></span><span style=display:flex><span>        <span style=color:#928374;font-style:italic>// Pretty-print JSON output
</span></span></span><span style=display:flex><span><span style=color:#928374;font-style:italic></span>        <span style=color:#b8bb26>&#34;--pretty&#34;</span>,
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=测试>测试
<a class=header-anchor href=#%e6%b5%8b%e8%af%95></a></h4><h5 id=编译运行>编译运行
<a class=header-anchor href=#%e7%bc%96%e8%af%91%e8%bf%90%e8%a1%8c></a></h5><p>打开 Remote-WSL，选择合适的文件夹，按 <code>F1</code> 输入 <code>CMake: Quick Start</code> ，CMake 会自动生成一个简单的模板项目，然后同样地执行 <code>CMake: Select a kit</code> , 选择 GCC，虽然 MSVC 率先一步实现了全部的 C++20 特性，但是感觉不如老牌的 GCC，而 GCC 相比 clang，已经基本支持了 C++20 的特性。然后我们编辑 <code>main.cpp</code> 文件：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#8ec07c>#include</span> <span style=color:#8ec07c;font-style:italic>&lt;array&gt;</span><span style=color:#8ec07c>
</span></span></span><span style=display:flex><span><span style=color:#8ec07c>#include</span> <span style=color:#8ec07c;font-style:italic>&lt;cstdio&gt;</span><span style=color:#8ec07c>
</span></span></span><span style=display:flex><span><span style=color:#8ec07c>#include</span> <span style=color:#8ec07c;font-style:italic>&lt;iostream&gt;</span><span style=color:#8ec07c>
</span></span></span><span style=display:flex><span><span style=color:#8ec07c></span>
</span></span><span style=display:flex><span><span style=color:#fe8019>using</span> std<span style=color:#fe8019>::</span>cout;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fabd2f>int</span> <span style=color:#fabd2f>main</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#fe8019>auto</span> arr <span style=color:#fe8019>=</span> std<span style=color:#fe8019>::</span>to_array({<span style=color:#d3869b>1</span>, <span style=color:#d3869b>2</span>, <span style=color:#d3869b>3</span>, <span style=color:#d3869b>4</span>, <span style=color:#d3869b>5</span>});
</span></span><span style=display:flex><span>    <span style=color:#fe8019>for</span> (<span style=color:#fe8019>auto</span> <span style=color:#fb4934>i</span> : arr)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        std<span style=color:#fe8019>::</span>printf(<span style=color:#b8bb26>&#34;%d &#34;</span>, i);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    cout <span style=color:#fe8019>&lt;&lt;</span> <span style=color:#b8bb26>&#34;</span><span style=color:#b8bb26>\n</span><span style=color:#b8bb26>Hello World!</span><span style=color:#b8bb26>\n</span><span style=color:#b8bb26>&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#fe8019>return</span> <span style=color:#d3869b>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>你可能注意到 <code>std::to_array</code> 被标注有误，抑或是 &ldquo;header not found&rdquo; 问题，修改 <code>CMakeList.txt</code> ，在 project(* VERSION 0.1.0)后添加这两行：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cmake data-lang=cmake><span style=display:flex><span><span style=color:#fabd2f>set</span>(<span style=color:#b8bb26>CMAKE_EXPORT_COMPILECOMMANDS</span> <span style=color:#b8bb26>ON</span>)
</span></span><span style=display:flex><span><span style=color:#fabd2f>set</span>(<span style=color:#b8bb26>CMAKE_CXX_STANDARD</span> <span style=color:#b8bb26>20</span>)
</span></span></code></pre></div><p>第一行生成 <code>compile_commands.json</code> 帮助 clangd 分析语法，第二行设置 C++ 标准为 C++20。</p><p>接着 <code>Ctrl+Shift+B</code> 或 <code>F7</code> 编译，<code>shift+F5</code> 运行，应当能在命令行看到：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-text data-lang=text><span style=display:flex><span>1 2 3 4 5
</span></span><span style=display:flex><span>Hello World!
</span></span></code></pre></div><h5 id=debug>debug
<a class=header-anchor href=#debug></a></h5><p>我们使用 lldb debug 前，按 <code>F1</code> , <code>CMake: Select Variant</code> 应当为 debug。</p><p>新建 <code>.vscode</code> 文件夹，添加编辑 launch.json 文件夹：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#fb4934>&#34;version&#34;</span>: <span style=color:#b8bb26>&#34;0.2.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#fb4934>&#34;configurations&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;type&#34;</span>: <span style=color:#b8bb26>&#34;lldb&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;request&#34;</span>: <span style=color:#b8bb26>&#34;launch&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;name&#34;</span>: <span style=color:#b8bb26>&#34;Debug&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;program&#34;</span>: <span style=color:#b8bb26>&#34;${command:cmake.launchTargetPath}&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;args&#34;</span>: [],
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;cwd&#34;</span>: <span style=color:#b8bb26>&#34;${workspaceFolder}&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;internalConsoleOptions&#34;</span>: <span style=color:#b8bb26>&#34;neverOpen&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#fb4934>&#34;console&#34;</span>: <span style=color:#b8bb26>&#34;integratedTerminal&#34;</span>,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>这是个简单的配置，能让你用 lldb 为项目 debug，接着打个断点按 <code>F5</code> 试试看吧。</p><h5 id=clang-format15>clang-format<sup id=fnref:14><a href=#fn:14 class=footnote-ref role=doc-noteref>14</a></sup>
<a class=header-anchor href=#clang-format15></a></h5><p>然后是 clang-format 配置，在你的项目新建一个 <code>.clang-format</code> 文件，它应该像这样，你可以根据官方文档查看对应版本的 clang-format 格式化风格选项修改：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#928374;font-style:italic># The style used for all options not specifically set in the configuration</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BasedOnStyle</span>: Microsoft
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The extra indent ou outdent of access modifiers</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AccessModifierOffset</span>: <span style=color:#d3869b>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, horizontally aligns arguments after an open brackets</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlignAfterOpenBracket</span>: Align
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If not None, when using initialization for an array of structs aligns the</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># fields into columns</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlignArrayOfStructures</span>: Right
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Style of aligning consective assignments</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># AlignConsecutiveAssignments: Consecutive</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Style of aligning consecutive bit field</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># AlignConsecutiveBitFields: Consecutive</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Style of aligning consecutive declarations</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># AlignConsecutiveDeclarations: Consecutive</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Sytle of aligning consecutive macro definitions</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlignConsecutiveMacros</span>: Consecutive
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Options for aligning backslashes in escaped newlines</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlignEscapedNewlines</span>: Right
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, horizontally align operands of binary and ternary expressions</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlignOperands</span>: AlignAfterOperator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, aligns trailing comments</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlignTrailingComments</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If a function call or braced initializer list doesn&#39;t fit on a line, allow</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># putting all arguments onto the next line, even if `BinPackArguments` is false</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowAllArgumentsOnNextLine</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If the function declaration doesn’t fit on a line, allow putting all</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># parameters of a function declaration onto the next line even if</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># `BinPackParameters` is `false`.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowAllParametersOfDeclarationOnNextLine</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Dependent on the value, `while (true) {continue;}` can be put on a single line</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowShortBlocksOnASingleLine</span>: Always
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, short case labels will be contracted to a single line</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowShortCaseLabelsOnASingleLine</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Allow short enums on a single line</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowShortEnumsOnASingleLine</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Dependent on the value, `int f() { return 0; }` can be put on a single line</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowShortFunctionsOnASingleLine</span>: All
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Dependent on the value, `if (a) return`; can be put on a single line</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowShortIfStatementsOnASingleLine</span>: Never
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Dependent on the value, `auto lambda []() { return 0; }` can be put on a</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># single line</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># AllowShortLambdasOnASingleLine: Always</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, `while (true) continue;` can be put on a single line</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AllowShortLoopsOnASingleLine</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The function declaration return type breaking style to use</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlwaysBreakAfterReturnType</span>: None
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, always break before multiline string literals</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlwaysBreakBeforeMultilineStrings</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The template declaration breaking style to use</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>AlwaysBreakTemplateDeclarations</span>: MultiLine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of strings that should be interpreted as attributes/qualifiers</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># instead of identifiers. This can be useful for language extensions or static</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># analyzer annotations</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># AttributeMacros:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If false, a function call’s arguments will either be all on the same line or</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># will have one line each</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BinPackArguments</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If false, a function declaration’s or function definition’s parameters will</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># either all be on the same line or will have one line each</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BinPackParameters</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The BitFieldColonSpacingStyle to use for bitfields</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># BitFieldColonSpacing: Both</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The brace breaking style to use</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BreakBeforeBraces</span>: Custom
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Control of individual brace wrapping cases</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BraceWrapping</span>:
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterCaseLabel</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterClass</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterControlStatement</span>: Always
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterEnum</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterFunction</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterNamespace</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#928374;font-style:italic># AfterObjCDeclaration:</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterStruct</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterUnion</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>AfterExternBlock</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>BeforeCatch</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>BeforeElse</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>BeforeLambdaBody</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>BeforeWhile</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>IndentBraces</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>SplitEmptyFunction</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>SplitEmptyRecord</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>  <span style=color:#fb4934>SplitEmptyNamespace</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Break after each annotation on a field in Java files</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BreakAfterJavaFieldAnnotations</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The way to wrap binary operators</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BreakBeforeBinaryOperators</span>: NonAssignment
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, concept will be placed on a new line</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># BreakBeforeConceptDeclarations: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, ternary operators will be placed after line breaks</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BreakBeforeTernaryOperators</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The break constructor initializers style to use.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BreakConstructorInitializers</span>: BeforeComma
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The inheritance list style to use</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BreakInheritanceList</span>: BeforeComma
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Allow breaking string literals when formatting</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>BreakStringLiterals</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The column limit. A column limit of 0 means that there is no column limit.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>ColumnLimit</span>: <span style=color:#d3869b>80</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A regular expression that describes comments with special meaning, which</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># should not be split into lines or otherwise changed</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># CommentPragmas:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, consecutive namespace declarations will be on the same line. If</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># false, each namespace is declared on a new line.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>CompactNamespaces</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The number of characters to use for indentation of constructor initializer</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># lists as well as inheritance lists</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ConstructorInitializerIndentWidth:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Indent width for line continuations</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ContinuationIndentWidth:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, format braced lists as best suited for C++11 braced lists</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>Cpp11BracedListStyle</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Analyze the formatted file for the most used line ending (\r\n or \n).</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># UseCRLF is only used as a fallback if none can be derived.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># DeriveLineEnding:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, analyze the formatted file for the most common alignment of &amp; and *.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Pointer and reference alignment styles are going to be updated according to</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># the preferences found in the file. PointerAlignment is then used only as</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># fallback.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># DerivePointerAlignment:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Disables formatting completely.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># DisableFormat: false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Defines when to put an empty line after access modifiers.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># `EmptyLineBeforeAccessModifier` configuration handles the number of empty</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># lines between two access modifiers.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>EmptyLineAfterAccessModifier</span>: Never
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Leave Keep existing empty lines after access modifiers.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># `MaxEmptyLinesToKeep` is applied instead.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># MaxEmptyLinesToKeep:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Defines in which cases to put empty line before access modifiers</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>EmptyLineBeforeAccessModifier</span>: Leave
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, clang-format detects whether function calls and definitions are</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># formatted with one parameter per line.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># NOTE: This is an experimental flag, that might go away or be renamed.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Do not use this in config files, etc. Use at your own risk.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ExperimentalAutoDetectBinPacking: false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, clang-format adds missing namespace end comments for short namespaces</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># and fixes invalid existing ones. Short ones are controlled by</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># “ShortNamespaceLines”.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>FixNamespaceComments</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of macros that should be interpreted as foreach loops instead of as</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># function calls.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ForEachMacros:[&#39;RANGES_FOR&#39;, &#39;FOREACH&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of macros that should be interpreted as conditionals instead of as</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># function calls.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># IfMacros: [&#39;IF&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Dependent on the value, multiple `#include` blocks can be sorted as one and</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># divided based on category.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IncludeBlocks</span>: Preserve
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># `Regroup` Merge multiple #include blocks together and sort as one. Then split</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># into groups based on category priority.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># `POSIX extended` regular expressions are supported.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Regular expressions denoting the different `#include` categories used for</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ordering `#includes`.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># IncludeCategories:</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>#   - Regex:           &#39;^&#34;(llvm|llvm-c|clang|clang-c)/&#39;</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>#     Priority:        2</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>#     SortPriority:    2</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic>#     CaseSensitive:   true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Specify a regular expression of suffixes that are allowed in the</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># file-to-main-include mapping.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># IncludeIsMainRegex:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Specify a regular expression for files being formatted that are allowed to be</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># considered “main” in the file-to-main-include mapping.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># IncludeIsMainSourceRegex:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Specify whether access modifiers should have their own indentation level.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IndentAccessModifiers</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Indent case label blocks one level from the case label</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IndentCaseBlocks</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Indent case labels one level from the switch statement.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IndentCaseLabels</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># IndentExternBlockStyle is the type of indenting of extern blocks</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># IndentExternBlock: AfterExternBlock</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Indent goto labels.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IndentGotoLabels</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The preprocessor directive indenting style to use</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IndentPPDirectives</span>: BeforeHash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Indent the requires clause in a template</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># IndentRequires: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The number of columns to use for indentation</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IndentWidth</span>: <span style=color:#d3869b>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Indent if a function definition or declaration is wrapped after the type</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>IndentWrappedFunctionNames</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># It is currently only available for JavaScript and disabled by default</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># InsertTrailingCommas: None</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of prefixes ordered by the desired groups for Java imports</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># JavaImportGroups: [&#39;com.example&#39;, &#39;com&#39;, &#39;org&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The JavaScriptQuoteStyle to use for JavaScript strings</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># JavaScriptQuotes: Double</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Whether to wrap JavaScript import/export statements.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># JavaScriptWrapImports: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, the empty line at the start of blocks is kept.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>KeepEmptyLinesAtTheStartOfBlocks</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The indentation style of lambda bodies</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># LambdaBodyIndentation: Signature</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Language, this format style is targeted at</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Language: Cpp</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A regular expression matching macros that start a block</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># MacroBlockBegin:</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># MacroBlockEnd:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># MaxEmptyLinesToKeep</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>MaxEmptyLinesToKeep</span>: <span style=color:#d3869b>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The indentation used for namespaces</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># NamespaceIndentation: All</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of macros which are used to open namespace blocks</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># NamespaceMacros:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Controls bin-packing Objective-C protocol conformance list items into as few</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># lines as possible when they go over `ColumnLimit`</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ObjCBinPackProtocolList: Auto</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The number of characters to use for indentation of ObjC blocks</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ObjCBlockIndentWidth: 4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Break parameters list into lines when there is nested block parameters in a</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># function call.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ObjCBreakBeforeNestedBlockParam: false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ObjCSpaceAfterProperty</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ObjCSpaceAfterProperty: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Add a space in front of an Objective-C protocol list, i.e. use Foo &lt;Protocol&gt;</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># instead of Foo&lt;Protocol&gt;</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ObjCSpaceBeforeProtocolList: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The pack constructor initializers style to use.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>PackConstructorInitializers</span>: CurrentLine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for breaking around an assignment operator</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyBreakAssignment:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for breaking a function call after call(</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyBreakBeforeFirstCallParameter: 1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for each line break introduced inside a comment</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyBreakComment:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for breaking before the first &lt;&lt;</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyBreakFirstLessLess:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for breaking after (.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyBreakOpenParenthesis:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for each line break introduced inside a string literal</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyBreakString:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for breaking after template declaration</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyBreakTemplateDeclaration:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The penalty for each character outside of the column limit</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyExcessCharacter:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Penalty for each character of whitespace indentation (counted relative to</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># leading non-whitespace column).</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyIndentedWhitespace:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Penalty for putting the return type of a function onto its own line</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># PenaltyReturnTypeOnItsOwnLine:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Pointer and reference alignment style</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>PointerAlignment</span>: Left
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Different ways to arrange specifiers and qualifiers (e.g. const/volatile)</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># QualifierAlignment: Leave</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The order in which the qualifiers appear. Order is an array that can contain</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># any of the following:</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># const、inline、static、constexpr、volatile、restrict、type</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># QualifierOrder: [&#39;inline&#39;, &#39;static&#39;, &#39;type&#39;, &#39;const&#39;, &#39;volatile&#39; ]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Defines hints for detecting supported languages code blocks in raw strings</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># RawStringFormats:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Reference alignment style (overrides PointerAlignment for references)</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ReferenceAlignment:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, clang-format will attempt to re-flow comments</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ReflowComments:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Remove optional braces of control statements (if, else, for, and while) in C++</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># according to the LLVM coding style.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># RemoveBracesLLVM: false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Specifies the use of empty lines to separate definition blocks, including</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># classes, structs, enums, and functions.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SeparateDefinitionBlocks</span>: Always
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The maximal number of unwrapped lines that a short namespace spans. Defaults</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># to 1.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># ShortNamespaceLines: 25</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Controls if and how clang-format will sort `#includes`</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SortIncludes</span>: CaseSensitive
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># When sorting Java imports, by default static imports are placed before</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># non-static imports.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># SortJavaStaticImport: after</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, clang-format will sort using declarations</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SortUsingDeclarations</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, a space is inserted after C style casts</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceAfterCStyleCast</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, a space is inserted after the logical not operator (`!`).</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceAfterLogicalNot</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, a space will be inserted after the ‘template’ keyword</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceAfterTemplateKeyword</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Defines in which cases to put a space before or after pointer qualifiers</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># SpaceAroundPointerQualifiers:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If false, spaces will be removed before assignment operators</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceBeforeAssignmentOperators</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If false, spaces will be removed before case colon</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceBeforeCaseColon</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, a space will be inserted before a C++11 braced list used to</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># initialize an object (after the preceding identifier or type).</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceBeforeCpp11BracedList</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If false, spaces will be removed before constructor initializer colon</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># SpaceBeforeCtorInitializerColon:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If false, spaces will be removed before inheritance colon</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceBeforeInheritanceColon</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Defines in which cases to put a space before opening parentheses</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceBeforeParens</span>: ControlStatements
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Control of individual space before parentheses</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># SpaceBeforeParensOptions:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If false, spaces will be removed before range-based for loop colon</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceBeforeRangeBasedForLoopColon</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces will be before [. Lambdas will not be affected. Only the first</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># [ will get a space added.</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceBeforeSquareBrackets</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces will be inserted into `{}`</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceInEmptyBlock</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces may be inserted into `()`</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpaceInEmptyParentheses</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The number of spaces before trailing line comments (// - comments)</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpacesBeforeTrailingComments</span>: <span style=color:#d3869b>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The SpacesInAnglesStyle to use for template argument lists</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpacesInAngles</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces may be inserted into C style casts</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># SpacesInCStyleCastParentheses:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces will be inserted around if/for/switch/while conditions</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpacesInConditionalStatement</span>: <span style=color:#fe8019>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces are inserted inside container literals (e.g. ObjC and</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Javascript array and dict literals).</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># SpacesInContainerLiterals: true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># How many spaces are allowed at the start of a line comment</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpacesInLineCommentPrefix</span>:
</span></span><span style=display:flex><span>  <span style=color:#fb4934>Minimum</span>: <span style=color:#d3869b>1</span>
</span></span><span style=display:flex><span>  <span style=color:#928374;font-style:italic># Maximum:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces will be inserted after `(` and before `)`</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># SpacesInParentheses: false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># If true, spaces will be inserted after `[` and before `]`</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>SpacesInSquareBrackets</span>: <span style=color:#fe8019>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Parse and format C++ constructs compatible with this standard</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>Standard</span>: Auto
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Macros which are ignored in front of a statement, as if they were an attribute</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>StatementAttributeLikeMacros</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of macros that should be interpreted as complete statements</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># StatementMacros:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The number of columns used for tab stops</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># TabWidth: 4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of macros that should be interpreted as type declarations instead of</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># as function calls.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># TypenameMacros: [&#39;STACK_OF&#39;, &#39;LIST&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># Use `\r\n` instead of `\n` for line breaks. Also used as fallback if</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># `DeriveLineEnding` is true.</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># UseCRLF:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># The way to use tab characters in the resulting file</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>UseTab</span>: Never
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># A vector of macros which are whitespace-sensitive and should not be touched</span>
</span></span><span style=display:flex><span><span style=color:#928374;font-style:italic># WhitespaceSensitiveMacros: [&#39;STRINGIZE&#39;, &#39;PP_STRINGIZE&#39;]</span>
</span></span></code></pre></div><h5 id=clang-tidy16>clang-tidy<sup id=fnref:15><a href=#fn:15 class=footnote-ref role=doc-noteref>15</a></sup>
<a class=header-anchor href=#clang-tidy16></a></h5><p>添加编辑 <code>.clang-tidy</code> 文件：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#fb4934>Checks</span>: <span style=color:#b8bb26>&#34;*,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -abseil-*,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -altera-*,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -android-*,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -fuchsia-*,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -llvm*,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -modernize-use-trailing-return-type,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -zircon-*,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -readability-else-after-return,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -readability-static-accessed-through-instance,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -readability-avoid-const-params-in-decls,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -cppcoreguidelines-non-private-member-variables-in-classes,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>        -misc-non-private-member-variables-in-classes,
</span></span></span><span style=display:flex><span><span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>WarningsAsErrors</span>: <span style=color:#b8bb26>&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>HeaderFilterRegex</span>: <span style=color:#b8bb26>&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#fb4934>FormatStyle</span>:     none
</span></span></code></pre></div><p>在你的<code>main.cpp</code> 中添加这个函数：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#fabd2f>int</span> <span style=color:#fabd2f>test</span>(<span style=color:#fabd2f>int</span> num)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#fabd2f>int</span> a <span style=color:#fe8019>=</span> <span style=color:#d3869b>3</span>;
</span></span><span style=display:flex><span>    <span style=color:#fe8019>return</span> num <span style=color:#fe8019>*</span> a <span style=color:#fe8019>*</span> <span style=color:#d3869b>5</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>你应该能看见 5 条信息：</p><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-text data-lang=text><span style=display:flex><span>Variable name &#39;a&#39; is too short, expected at least 3 characters
</span></span><span style=display:flex><span>5 is a magic number; consider replacing it with a named constant
</span></span><span style=display:flex><span>5 is a magic number; consider replacing it with a named constant
</span></span><span style=display:flex><span>Variable name &#39;i&#39; is too short, expected at least 3 characters
</span></span><span style=display:flex><span>Do not call c-style vararg functions
</span></span></code></pre></div><p>至此，我们的实践简单地告一段落，显然还有很多实践值得一讲，主要是因为我水累了。</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://docs.microsoft.com/zh-cn/windows/wsl/about title="什么是适用于 Linux 的 Windows 子系统？" rel="noopener external nofollow noreferrer" target=_blank class=exturl>什么是适用于 Linux 的 Windows 子系统？
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://www.most-useful.com/ubuntu-20-04-desktop-gui-on-wsl-2-on-surface-pro-4.html#login_with_vcxsrv_in_xdmcp_mode title="Ubuntu 20.04 Desktop GUI on WSL 2 on Surface Pro" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Ubuntu 20.04 Desktop GUI on WSL 2 on Surface Pro
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://zhuanlan.zhihu.com/p/507011452 title="为什么说 Ubuntu 22.04 LTS 是史诗级的版本 - 开源 <em>Linux</em> 的文章 - 知乎" rel="noopener external nofollow noreferrer" target=_blank class=exturl>为什么说 Ubuntu 22.04 LTS 是史诗级的版本 - 开源 <em>Linux</em> 的文章 - 知乎
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://docs.microsoft.com/zh-cn/windows/wsl/install title="使用 WSL 在 Windows 上安装 Linux" rel="noopener external nofollow noreferrer" target=_blank class=exturl>使用 WSL 在 Windows 上安装 Linux
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href=https://blogs.windows.com/windows-insider/2022/07/19/announcing-windows-11-insider-preview-build-22621-436-and-22622-436/ title="Announcing Windows 11 Insider Preview Build 22621.436 and 22622.436" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Announcing Windows 11 Insider Preview Build 22621.436 and 22622.436
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p><a href=https://docs.microsoft.com/zh-cn/windows/wsl/setup/environment#set-up-your-linux-username-and-password title="设置 Linux 用户名和密码" rel="noopener external nofollow noreferrer" target=_blank class=exturl>设置 Linux 用户名和密码
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p><a href="https://zh.wikipedia.org/zh-cn/APT?oldformat=true" title=APT rel="noopener external nofollow noreferrer" target=_blank class=exturl>APT
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:8><p><a href=https://www.most-useful.com/ubuntu-20-04-desktop-gui-on-wsl-2-on-surface-pro-4.html#login_with_vcxsrv_in_xdmcp_mode title="Ubuntu 20.04 Desktop GUI on WSL 2 on Surface Pro" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Ubuntu 20.04 Desktop GUI on WSL 2 on Surface Pro
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:8 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:9><p><a href=https://github.com/arkane-systems/genie title="arkane-systems / genie" rel="noopener external nofollow noreferrer" target=_blank class=exturl>arkane-systems / genie
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:9 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:10><p><a href=https://x410.dev/cookbook/wsl/where-should-i-add-my-display-environment-variable/ title="Where should I add my DISPLAY environment variable in WSL?" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Where should I add my DISPLAY environment variable in WSL?
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:10 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:11><p><a href=https://x410.dev/cookbook/wsl/directly-opening-linux-gui-apps-from-windows-batch-files/ title="Directly opening Linux GUI apps from Windows batch files" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Directly opening Linux GUI apps from Windows batch files
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:11 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:12><p><a href=https://ubuntu.com/blog/how-are-we-improving-firefox-snap-performance-part-1 title="How are we improving Firefox snap performance? Part 1" rel="noopener external nofollow noreferrer" target=_blank class=exturl>How are we improving Firefox snap performance? Part 1
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:12 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:13><p><a href=https://zhuanlan.zhihu.com/p/150555651 title=WSL2中使用VcXsrv实现xfce4图形界面+声音传输 rel="noopener external nofollow noreferrer" target=_blank class=exturl>WSL2中使用VcXsrv实现xfce4图形界面+声音传输
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:13 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:14><p><a href=https://releases.llvm.org/14.0.0/tools/clang/docs/ClangFormatStyleOptions.html title="Clang 14.0.0 documentation-Clang-Format Style Options" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Clang 14.0.0 documentation-Clang-Format Style Options
<i class="fa fa-external-link-alt"></i>
</a>&#160;<a href=#fnref:14 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:15><p><strong><a href=https://github.com/cpp-best-practices/gui_starter_template title=gui_starter_template rel="noopener external nofollow noreferrer" target=_blank class=exturl>gui_starter_template
<i class="fa fa-external-link-alt"></i>
</a></strong>&#160;<a href=#fnref:15 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><div class=post-tags><a href=/tags/></a><a href=/tags/></a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境</li><li class=post-copyright-author><strong>原文作者： </strong>Taiavs Jumala</li><li class=post-copyright-link><strong>原文链接： </strong><a target=_blank href title="WSL 安装实践：WSL2+Ubuntu-22.04+KDE 配置开发环境"></a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=https://twitter.com/TaivasJumal><span class=icon><i class="fab fa-twitter"></i>
</span><span class=label>Twitter</span></a></div><div class=social-item><a target=_blank class=social-link href=/atom.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"></div><div class="post-nav-prev post-nav-item"><a href=/document/linux-kernel-for-microsoft-surface-devices/ rel=prev title="为 Microsoft Surface 设备准备的 openSUSE Tumbleweed 内核">为 Microsoft Surface 设备准备的 openSUSE Tumbleweed 内核
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=utterances-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2023
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Taivas Jumala</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.121.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#6667AB","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://blog.taivasjumala.yafoss.org","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":null,"views":null},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"statis":{"enable":true,"plugin":"busuanzi"},"utterances":{"cfg":{"issueterm":"pathname","label":"comments","repo":"Taivasjumala/Taivasjumala.github.io","theme":"gruvbox-dark"},"js":"https://utteranc.es/client.js"},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.2b5f467512520fcaa7e0b91ce1f64560c1678c723e738ed1b9fa0066316a1e21.js defer></script></body></html>